{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Bienvenid@ a la Documentaci\u00f3n T\u00e9cnica de Qonta","text":"<p>Este sitio es una fuente centralizada de informaci\u00f3n para desarrolladores, personal de soporte y cualquier persona interesada en comprender los aspectos t\u00e9cnicos del sistema Qonta.</p>"},{"location":"#que-es-qonta","title":"\u00bfQu\u00e9 es Qonta?","text":"<p>Qonta es una soluci\u00f3n innovadora dise\u00f1ada para optimizar y automatizar la gesti\u00f3n de facturas electr\u00f3nicas en Colombia. Desde la descarga directa de facturas desde la DIAN, pasando por el acuse a trav\u00e9s de nuestro proveedor tecnol\u00f3gico Kiai, hasta la causaci\u00f3n contable automatizada, Qonta busca asegurar la eficiencia, precisi\u00f3n y cumplimiento normativo en todo el ciclo de vida de las facturas de proveedores.</p>"},{"location":"#caracteristicas-clave","title":"Caracter\u00edsticas Clave:","text":"<ul> <li>Acuse de Facturas: Integraci\u00f3n con Kiai para el acuse de facturas electr\u00f3nicas.</li> <li>Causaci\u00f3n Automatizada: Motor inteligente que aplica las complejas reglas de la DIAN para la causaci\u00f3n.</li> <li>Gesti\u00f3n de Retenciones: Identificaci\u00f3n y discriminaci\u00f3n autom\u00e1tica de ReteFuente, ReteIVA y ReteICA.</li> <li>Integraci\u00f3n DIAN: Bot de descarga directa de facturas desde la plataforma de la DIAN.</li> <li>Flexibilidad: Uso de GraphQL para consultas eficientes y sistema de Hooks para reglas de negocio personalizables con JavaScript y Sequelize.</li> </ul>"},{"location":"#como-usar-esta-documentacion","title":"\u00bfC\u00f3mo Usar Esta Documentaci\u00f3n?","text":"<p>Utiliza la barra de navegaci\u00f3n de la izquierda para explorar las diferentes secciones. Si buscas algo espec\u00edfico, el campo de b\u00fasqueda te ayudar\u00e1 a encontrarlo r\u00e1pidamente.</p>"},{"location":"CHANGELOG/","title":"6. Registro de Cambios (Changelog)","text":"<p>Este documento registra todas las modificaciones, adiciones, mejoras y correcciones realizadas al sistema Qonta a lo largo de su desarrollo. Sigue el formato Keep a Changelog para claridad.</p>"},{"location":"CHANGELOG/#120-2025-11-15-estabilizacion-de-modulos-y-integracion-crm","title":"[1.2.0] - 2025-11-15 - Estabilizaci\u00f3n de M\u00f3dulos y Integraci\u00f3n CRM","text":""},{"location":"CHANGELOG/#anadido","title":"A\u00f1adido","text":"<ul> <li>Integraci\u00f3n inicial del M\u00f3dulo CRM (tablas <code>EmpresasCrm</code>, <code>OportunidadesCrm</code>, <code>GestionesCrm</code>).</li> <li>Nuevo endpoint GraphQL para la gesti\u00f3n de Hooks de Causaci\u00f3n (<code>Mutation: actualizarHook(movimientoId, codigoJs)</code>).</li> <li>Se a\u00f1adi\u00f3 la tabla <code>Terceros</code> para gestionar beneficiarios distintos a Proveedores y Clientes.</li> <li>Implementaci\u00f3n del evento de Aceptaci\u00f3n T\u00e1cita en la integraci\u00f3n con Kiai.</li> </ul>"},{"location":"CHANGELOG/#cambiado","title":"Cambiado","text":"<ul> <li>Refactorizaci\u00f3n completa del Microservicio Bot DIAN a Python para mejorar la robustez del Web Scraping.</li> <li>Actualizaci\u00f3n de la tabla <code>FacturasRecibidasDian</code> para incluir los campos <code>ValorAPagar</code>, <code>ValorPagado</code> y <code>RetencionAsumida</code>.</li> <li>Modificaci\u00f3n de la l\u00f3gica de aplicaci\u00f3n de ReteICA en <code>Causaciones</code> para depender de la tabla <code>ImpuestosICAxClientes</code> en lugar de una l\u00f3gica hardcodeada.</li> </ul>"},{"location":"CHANGELOG/#corregido","title":"Corregido","text":"<ul> <li>Error en la clasificaci\u00f3n de \u00edtems: Palabras clave que conten\u00edan n\u00fameros ahora se procesan correctamente.</li> <li>Fallo en la sincronizaci\u00f3n de proveedores que estaban marcados como Autoretenedores al momento de causar.</li> <li>Se corrigi\u00f3 la validaci\u00f3n de <code>NumeroDocumentoRepresentante</code> para permitir nulos si el tipo de organizaci\u00f3n es persona natural.</li> </ul>"},{"location":"CHANGELOG/#110-2025-08-20-motor-de-causacion-mejorado","title":"[1.1.0] - 2025-08-20 - Motor de Causaci\u00f3n Mejorado","text":""},{"location":"CHANGELOG/#anadido_1","title":"A\u00f1adido","text":"<ul> <li>Implementaci\u00f3n del m\u00f3dulo de Centros de Costos por Factura (<code>CentrosCostosxfacturas</code>).</li> <li>Se a\u00f1adi\u00f3 la l\u00f3gica para el manejo de Causaciones Originales (<code>CausacionesOriginales</code>) para auditor\u00eda.</li> <li>Funcionalidad de Cierre de Meses (<code>CierresMeses</code>) para bloquear la edici\u00f3n de causaciones en periodos contables cerrados.</li> </ul>"},{"location":"CHANGELOG/#cambiado_1","title":"Cambiado","text":"<ul> <li>Mejora del rendimiento de las consultas GraphQL para la pantalla de Bandeja de Facturas.</li> <li>Actualizaci\u00f3n del esquema de la tabla <code>CufesXML</code> para manejar mejor los descuentos y cargos (<code>ItemCufeXMLAllowanceCharges</code>).</li> </ul>"},{"location":"CHANGELOG/#corregido_1","title":"Corregido","text":"<ul> <li>Se resolvi\u00f3 un bug donde la ReteFuente asumida se calculaba incorrectamente en facturas de no declarantes.</li> <li>Correcci\u00f3n en el flujo de asignaci\u00f3n de facturas a usuarios (<code>DetallesFacturasRecibidasDianxAsignaciones</code>).</li> </ul>"},{"location":"01_vision_general/","title":"1. Visi\u00f3n General del Sistema Qonta","text":"<p>Esta secci\u00f3n proporciona una introducci\u00f3n de alto nivel al sistema Qonta, sus objetivos y el contexto de las aplicaciones que lo componen.</p>"},{"location":"01_vision_general/#proposito-general","title":"Prop\u00f3sito General","text":"<p>Qonta es la soluci\u00f3n principal para la automatizaci\u00f3n de la causaci\u00f3n y acuse de facturas electr\u00f3nicas en Colombia. Su objetivo es garantizar la eficiencia operativa y el cumplimiento legal de la normativa DIAN/Radi\u00e1n, minimizando la intervenci\u00f3n manual del personal contable.</p>"},{"location":"01_vision_general/#aplicaciones-en-el-ecosistema","title":"Aplicaciones en el Ecosistema","text":"<p>Qonta opera dentro de un ecosistema que comparte una base de datos central. Las tablas se dividen por m\u00f3dulo l\u00f3gico:</p> M\u00f3dulo/Aplicaci\u00f3n Prefijo en Tablas Enfoque Principal Qonta Core Ninguno (ej. <code>Causaciones</code>, <code>Clientes</code>) Causaci\u00f3n contable, procesamiento de XML, gesti\u00f3n de impuestos. CRM <code>*Crm</code> (ej. <code>EmpresasCrm</code>, <code>OportunidadesCrm</code>) Gesti\u00f3n del ciclo de ventas y relaci\u00f3n con clientes. Infraestructura (Ninguno o gen\u00e9rico) Usuarios, Roles, Pa\u00edses, Municipios, Variables."},{"location":"01_vision_general/#puntos-de-interes","title":"Puntos de Inter\u00e9s","text":"<ul> <li>Acuse: Se realiza mediante la API de Kiai.</li> <li>Causaci\u00f3n: Se automatiza mediante reglas complejas (Hooks) que discriminan ReteFuente, ReteIVA y ReteICA.</li> <li>Integraci\u00f3n: La descarga se realiza con un bot, y la inserci\u00f3n de datos se hace con un microservicio de Node.js/Prisma.</li> </ul>"},{"location":"01_vision_general/introduccion/","title":"1. Visi\u00f3n General del Sistema Qonta","text":""},{"location":"01_vision_general/introduccion/#11-introduccion","title":"1.1 Introducci\u00f3n","text":"<p>Nombre del Sistema: Qonta</p> <p>Prop\u00f3sito y Objetivos: Qonta es un sistema dise\u00f1ado para automatizar y optimizar la gesti\u00f3n del ciclo de vida de las facturas electr\u00f3nicas en Colombia, desde su recepci\u00f3n hasta su causaci\u00f3n. Su objetivo principal es simplificar y estandarizar los procesos contables relacionados con las facturas de proveedores, asegurando el cumplimiento de las normativas de la Direcci\u00f3n de Impuestos y Aduanas Nacionales (DIAN) y proporcionando trazabilidad y eficiencia a las empresas.</p> <p>Contexto Empresarial y Problemas que Resuelve: En el entorno regulatorio colombiano, la gesti\u00f3n de facturas electr\u00f3nicas recibidas, su acuse y posterior causaci\u00f3n contable, presenta desaf\u00edos significativos en t\u00e9rminos de tiempo, precisi\u00f3n y cumplimiento normativo. Qonta aborda estos problemas automatizando las siguientes etapas clave:</p> <ul> <li>Recepci\u00f3n y Acuse: Automatiza la descarga de facturas de la DIAN y el proceso de acuse, que es un requisito legal.</li> <li>Causaci\u00f3n Inteligente: Implementa un motor de causaci\u00f3n que aplica las reglas de la DIAN para identificar y discriminar retenciones (ReteFuente, ReteIVA, ReteICA), impuestos y otras consideraciones contables.</li> <li>Eficiencia Operativa: Reduce la intervenci\u00f3n manual, minimizando errores y acelerando los procesos contables de las facturas de proveedores.</li> </ul> <p>Audiencia: Esta secci\u00f3n est\u00e1 dirigida a todos los interesados en comprender el prop\u00f3sito general y el alcance de Qonta, incluyendo stakeholders, gerencia, nuevos miembros del equipo y desarrolladores.</p>"},{"location":"02_modelo_datos/","title":"2. Modelo de Datos \ud83d\udcbe","text":"<p>Esta secci\u00f3n detalla la estructura fundamental de la Base de Datos de Qonta, que soporta todas las operaciones de causaci\u00f3n y almacenamiento de informaci\u00f3n fiscal.</p> <p>Aqu\u00ed encontrar\u00e1s el Diagrama Entidad-Relaci\u00f3n (MER) y la especificaci\u00f3n de cada una de las tablas del sistema.</p> <p>Documentos en esta secci\u00f3n:</p> <ul> <li>2.1 Diagrama Entidad-Relaci\u00f3n (MER): Visi\u00f3n global de las relaciones entre entidades.</li> <li>2.2 Detalle de Tablas: Descripci\u00f3n de cada tabla y sus campos principales.</li> </ul>"},{"location":"02_modelo_datos/01_mer/","title":"2.1 Modelo Entidad-Relaci\u00f3n (MER)","text":"<p>Este documento describe el modelo de datos de Qonta, presentando las tablas principales del sistema y sus relaciones. El dise\u00f1o de la base de datos es fundamental para el manejo eficiente y la integridad de la informaci\u00f3n de las facturas electr\u00f3nicas y los procesos de causaci\u00f3n.</p>"},{"location":"02_modelo_datos/01_mer/#diagramas-por-modulo-funcional","title":"Diagramas por M\u00f3dulo Funcional","text":"<p>Para facilitar la comprensi\u00f3n, el modelo de datos se ha dividido en los siguientes diagramas funcionales.</p>"},{"location":"02_modelo_datos/01_mer/#1-modulo-de-facturacion-y-causacion","title":"1. M\u00f3dulo de Facturaci\u00f3n y Causaci\u00f3n","text":"<p>Este diagrama muestra las entidades centrales del proceso de recepci\u00f3n, aprobaci\u00f3n y contabilizaci\u00f3n de facturas.</p> <pre><code>    classDiagram\n    direction LR\n    class FacturasRecibidasDian {\n        varchar(300) Cufe\n        varchar(100) Estado\n        decimal(19,3) Valor\n        datetime2 FechaEmision\n        datetime2 FechaVencimiento\n        uniqueidentifier ClienteFK\n        uniqueidentifier ProveedorFK\n        uniqueidentifier UsuarioAsignadoFK\n        bit Causada\n        bit Pagada\n        uniqueidentifier Id\n    }\n    class CufesXML {\n        varchar(100) NumeroFactura\n        datetime2 FechaEmision\n        varchar(1000) CUFE\n        decimal(19,3) ValorTotal\n        uniqueidentifier Id\n    }\n    class ItemsCufeXML {\n        uniqueidentifier CufeXMLFK\n        varchar(1000) Description\n        decimal(19,3) LineExtensionAmount\n        uniqueidentifier ClasificacionFK\n        uniqueidentifier CuentaK\n        uniqueidentifier Id\n    }\n    class Causaciones {\n        uniqueidentifier FacturaFK\n        uniqueidentifier ItemCufeXMLFK\n        uniqueidentifier CuentaFK\n        decimal(10,2) Debito\n        decimal(10,2) Credito\n        uniqueidentifier CentroCostosFK\n        datetime2 Fecha\n        uniqueidentifier Id\n    }\n    class TrazabilidadesCausaciones {\n        uniqueidentifier CausacionFK\n        uniqueidentifier UsuarioFK\n        datetime2 Fecha\n        varchar(max) Cambios\n        uniqueidentifier Id\n    }\n    class CentrosCostos {\n        varchar(100) Nombre\n        varchar(100) Codigo\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n\n    FacturasRecibidasDian --&gt; CufesXML : CufeXMLFKID\n    FacturasRecibidasDian --&gt; Proveedores : ProveedorFKID\n    FacturasRecibidasDian --&gt; Clientes : ClienteFKID\n    ItemsCufeXML --&gt; CufesXML : CufeXMLFKID\n    Causaciones --&gt; FacturasRecibidasDian : FacturaFKID\n    Causaciones --&gt; ItemsCufeXML : ItemCufeXMLFKID\n    Causaciones --&gt; PlandeCuentas : CuentaFKID\n    Causaciones --&gt; CentrosCostos : CentroCostosFKID\n    TrazabilidadesCausaciones --&gt; Causaciones : CausacionFKID\n    TrazabilidadesCausaciones --&gt; Usuarios : UsuarioFKID</code></pre>"},{"location":"02_modelo_datos/01_mer/#2-modulo-de-terceros-clientes-proveedores-y-usuarios","title":"2. M\u00f3dulo de Terceros (Clientes, Proveedores y Usuarios)","text":"<p>Este modelo representa las entidades principales que interact\u00faan con el sistema, como clientes, proveedores y usuarios internos.</p> <pre><code>    classDiagram\n    direction RL\n    class Clientes {\n        varchar(100) NumeroDocumento\n        varchar(1000) RazonSocial\n        uniqueidentifier ActividadEconomicaFK\n        uniqueidentifier Id\n    }\n    class Proveedores {\n        varchar(100) NumeroDocumento\n        varchar(250) RazonSocial\n        uniqueidentifier ClienteFK\n        uniqueidentifier ActividadEconomicaFK\n        uniqueidentifier Id\n    }\n    class Usuarios {\n        varchar(200) Nombre\n        varchar(200) Apellidos\n        varchar(300) Correo\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n    class Terceros {\n        uniqueidentifier ClienteFK\n        varchar(500) Nombre\n        varchar(100) NumeroDocumento\n        uniqueidentifier Id\n    }\n    class ActividadesEconomicas {\n        varchar(10) Codigo\n        varchar(1000) Nombre\n        uniqueidentifier Id\n    }\n    class TiposDocumentos {\n        varchar(100) Codigo\n        varchar(200) Nombre\n        uniqueidentifier Id\n    }\n\n    Proveedores --&gt; Clientes : ClienteFKID\n    Usuarios --&gt; Clientes : ClienteFKID\n    Terceros --&gt; Clientes : ClienteFKID\n    Clientes --&gt; ActividadesEconomicas : ActividadEconomicaFKID\n    Proveedores --&gt; ActividadesEconomicas : ActividadEconomicaFKID\n    Clientes --&gt; TiposDocumentos : TipoDocumentoFKID\n    Proveedores --&gt; TiposDocumentos : TipoDocumentoFKID\n    Terceros --&gt; TiposDocumentos : TipoDocumentoFKID</code></pre>"},{"location":"02_modelo_datos/01_mer/#3-modulo-de-configuracion-contable-y-fiscal","title":"3. M\u00f3dulo de Configuraci\u00f3n Contable y Fiscal","text":"<p>Aqu\u00ed se definen las tablas para la configuraci\u00f3n de planes de cuentas, impuestos, retenciones y sus clasificaciones.</p> <pre><code>    classDiagram\n    class PlandeCuentas {\n        varchar(100) NumCuenta\n        varchar(100) Nombre\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n    class Impuestos {\n        varchar(100) Codigo\n        varchar(500) Nombre\n        varchar(100) Porcentaje\n        uniqueidentifier Id\n    }\n    class ConceptosRetencion {\n        varchar(100) Nombre\n        decimal(10,2) TarifaDeclarante\n        decimal(10,2) Base\n        uniqueidentifier Id\n    }\n    class ClasificacionesConceptos {\n        uniqueidentifier ProveedorFK\n        uniqueidentifier ConceptoFK\n        uniqueidentifier CuentaFK\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n    class ImpuestosICA {\n        varchar(250) Nombre\n        decimal(19,3) Porcentaje\n        uniqueidentifier MunicipioFK\n        uniqueidentifier Id\n    }\n    class ResponsabilidadesFiscales {\n        varchar(10) Codigo\n        varchar(1000) Nombre\n        uniqueidentifier Id\n    }\n\n    PlandeCuentas --&gt; Clientes : ClienteFKID\n    ClasificacionesConceptos --&gt; Clientes : ClienteFKID\n    ClasificacionesConceptos --&gt; Proveedores : ProveedorFKID\n    ClasificacionesConceptos --&gt; ConceptosRetencion : ConceptoFKID\n    ClasificacionesConceptos --&gt; PlandeCuentas : CuentaFKID\n    ImpuestosICAxClientes --&gt; ImpuestosICA : ICAFKID\n    ImpuestosICAxClientes --&gt; Clientes : ClienteFKID\n    ResponsabilidadesFiscalesClientes --&gt; ResponsabilidadesFiscales : ResposabilidadFiscalFKID\n    ResponsabilidadesFiscalesProveedores --&gt; ResponsabilidadesFiscales : ResposabilidadFiscalFKID</code></pre>"},{"location":"02_modelo_datos/01_mer/#4-modulo-crm","title":"4. M\u00f3dulo CRM","text":"<p>Este diagrama agrupa todas las entidades relacionadas con la Gesti\u00f3n de Relaciones con Clientes (CRM).</p> <pre><code>    classDiagram\n    class OportunidadesCrm {\n        varchar(100) Nombre\n        uniqueidentifier EmpresaFK\n        uniqueidentifier EtapasFk\n        uniqueidentifier UsuarioFk\n        uniqueidentifier Id\n    }\n    class EmpresasCrm {\n        varchar(100) Nombre\n        varchar(100) Identificacion\n        uniqueidentifier SectorFK\n        uniqueidentifier Id\n    }\n    class ContactosEmpresasCrm {\n        varchar(100) Nombre\n        varchar(100) Correo\n        uniqueidentifier EmpresaCrmFk\n        uniqueidentifier Id\n    }\n    class GestionesCrm {\n        varchar(100) Nombre\n        datetime2 FechaGestion\n        uniqueidentifier OportunidadCrmFK\n        uniqueidentifier Id\n    }\n    class EtapasCrm {\n        varchar(100) Nombre\n        int Orden\n        uniqueidentifier Id\n    }\n    class SectoresCrm {\n        varchar(100) Nombre\n        uniqueidentifier Id\n    }\n\n    OportunidadesCrm --&gt; EmpresasCrm : EmpresaFKID\n    OportunidadesCrm --&gt; EtapasCrm : EtapasFkID\n    OportunidadesCrm --&gt; Usuarios : UsuarioFkID\n    OportunidadesCrm --&gt; ContactosEmpresasCrm : ContactoEmpresaCrmFkID\n    ContactosEmpresasCrm --&gt; EmpresasCrm : EmpresaCrmFkID\n    GestionesCrm --&gt; OportunidadesCrm : OportunidadCrmFKID\n    EmpresasCrm --&gt; SectoresCrm : SectorFKID</code></pre>"},{"location":"02_modelo_datos/01_mer/#5-modulo-de-datos-maestros-y-geograficos","title":"5. M\u00f3dulo de Datos Maestros y Geogr\u00e1ficos","text":"<p>Contiene las tablas de soporte con informaci\u00f3n que no cambia frecuentemente, como la estructura geogr\u00e1fica.</p> <pre><code>    classDiagram\n    class Paises {\n        varchar(100) Nombre\n        varchar(100) Codigo\n        uniqueidentifier Id\n    }\n    class Departamentos {\n        varchar(500) Nombre\n        varchar(10) Codigo\n        uniqueidentifier PaisFK\n        uniqueidentifier Id\n    }\n    class Municipios {\n        varchar(500) Nombre\n        varchar(10) Codigo\n        uniqueidentifier DepartamentoFK\n        uniqueidentifier Id\n    }\n    class CodigosPostales {\n        varchar(100) PostalCodigo\n        uniqueidentifier MunicipioFK\n        uniqueidentifier Id\n    }\n\n    Departamentos --&gt; Paises : PaisFKID\n    Municipios --&gt; Departamentos : DepartamentoFKID\n    CodigosPostales --&gt; Municipios : MunicipioFKID</code></pre>"},{"location":"02_modelo_datos/01_mer/#6-modulo-de-seguridad-y-acceso","title":"6. M\u00f3dulo de Seguridad y Acceso","text":"<p>Define c\u00f3mo los usuarios se relacionan con roles, m\u00f3dulos y aplicaciones para gestionar permisos.</p> <pre><code>    classDiagram\n    class Usuarios {\n        varchar(200) Nombre\n        varchar(300) Correo\n        uniqueidentifier Id\n    }\n    class Roles {\n        nvarchar(200) Nombre\n        uniqueidentifier ModuloFK\n        uniqueidentifier Id\n    }\n    class Modulos {\n        varchar(100) Nombre\n        varchar(100) IdMenu\n        uniqueidentifier Id\n    }\n    class RolesxUsuarios {\n        uniqueidentifier UsuarioId\n        uniqueidentifier RoleId\n        uniqueidentifier Id\n    }\n    class AplicacionesxUsuarios {\n        uniqueidentifier UsuarioFK\n        uniqueidentifier ModuloFK\n        uniqueidentifier Id\n    }\n\n    RolesxUsuarios --&gt; Usuarios : UsuarioIdID\n    RolesxUsuarios --&gt; Roles : RoleIdID\n    Roles --&gt; Modulos : ModuloFKID\n    AplicacionesxUsuarios --&gt; Usuarios : UsuarioFKID\n    AplicacionesxUsuarios --&gt; Modulos : ModuloFKID</code></pre> Definici\u00f3n de Clases (Tablas) <pre><code>    classDiagram\n    direction BT\n    class ActividadesEconomicas {\n        varchar(1000) Nombre\n        varchar(10) Codigo\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class AplicacionesxUsuarios {\n        uniqueidentifier UsuarioFK\n        uniqueidentifier ModuloFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class Causaciones {\n        uniqueidentifier FacturaFK\n        uniqueidentifier CufeXMLFK\n        uniqueidentifier ItemCufeXMLFK\n        uniqueidentifier ClasificacionFK\n        uniqueidentifier CuentaFK\n        decimal(10,2) Debito\n        decimal(10,2) Credito\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier ConceptoFK\n        varchar(500) Observaciones\n        decimal(19,3) Posicion\n        uniqueidentifier ProveedorFK\n        varchar(max) Auxiliar\n        bit ReteFuente\n        bit ReteIva\n        bit ReteICA\n        uniqueidentifier TerceroFK\n        varchar(100) Comprobante\n        uniqueidentifier CentroCostosFK\n        decimal(19,3) BaseRF\n        datetime2 Fecha\n        bit CuentaPorPagar\n        bit Gasto\n        bit RetencionAsumida\n        bit ImpMayorValor\n        bit ImpuestoBit\n        uniqueidentifier ImpuestoFK\n        bit NoDeducible\n        uniqueidentifier Id\n    }\n    class CausacionesOriginales {\n        uniqueidentifier FacturaFK\n        uniqueidentifier CufeXMLFK\n        uniqueidentifier ClasificacionFK\n        uniqueidentifier CuentaFK\n        decimal(19,3) Debito\n        decimal(19,3) Credito\n        uniqueidentifier ConceptoFK\n        varchar(500) Observaciones\n        decimal(19,3) Posicion\n        uniqueidentifier ProveedorFK\n        bit Impuesto\n        uniqueidentifier UsuarioCreacion\n        datetime2 FechaCreacion\n        bit Modificada\n        bit ReteFuente\n        varchar(100) Comprobante\n        uniqueidentifier CentroCostosFK\n        decimal(19,3) BaseRF\n        datetime2 Fecha\n        bit CuentaPorPagar\n        bit Gasto\n        bit RetencionAsumida\n        uniqueidentifier Id\n    }\n    class CentrosCostos {\n        varchar(100) Nombre\n        varchar(100) Codigo\n        uniqueidentifier ClienteFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class CentrosCostosxfacturas {\n        uniqueidentifier CentroCostosFK\n        uniqueidentifier CuentaFK\n        uniqueidentifier FacturaFK\n        decimal(19,3) Porcentaje\n        decimal(19,3) Valor\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier ClasificacionCCFK\n        uniqueidentifier Id\n    }\n    class CierresMeses {\n        varchar(100) Mes\n        varchar(10) Anio\n        varchar(100) Estado\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n    class ClasificacionesCentrosCostos {\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Descripcion\n        varchar(500) Nombre\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n    class ClasificacionesConceptos {\n        uniqueidentifier ProveedorFK\n        uniqueidentifier ConceptoFK\n        uniqueidentifier ClienteFK\n        uniqueidentifier CuentaFK\n        bit AplicaCentroCosto\n        varchar(100) Estado\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier CuentaReteIvaFK\n        uniqueidentifier Id\n    }\n    class Clientes {\n        uniqueidentifier TipoOrganizacionFK\n        uniqueidentifier TipoDocumentoFK\n        varchar(100) NumeroDocumento\n        varchar(1000) RazonSocial\n        uniqueidentifier ActividadEconomicaFK\n        varchar(2000) Direccion\n        uniqueidentifier CodigoPostalFK\n        varchar(100) TelefonoPrincipal\n        varchar(100) TelefonoAlterntivo\n        varchar(500) Correo\n        uniqueidentifier TipoDocumentoRepresentanteFK\n        varchar(100) NumeroDocumentoRepresentante\n        varchar(1000) NombreCompletoRepresentante\n        bit PepRepresentante\n        varchar(200) CorreoRepresentante\n        varchar(100) TelefonoRepresentante\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        bit Estado\n        bit RFMayorValorFacturado\n        bit RFMayorTarifa\n        bit RFConBase\n        bit RFSinBase\n        bit RST\n        decimal(10,2) ReteIva\n        bit ReteIvaConBase\n        bit ReteIvaSinBase\n        varchar(100) CuentaReteIvaBienFK\n        varchar(100) CuentaReteIvaServicioFK\n        varchar(50) CuentaReteFuenteAsumidaFK\n        varchar(50) CuentaReteIvaAsumidaFK\n        varchar(50) CuentaReteICAAsumidaFK\n        varchar(100) ComprobanteCredito\n        varchar(100) ComprobanteDebito\n        uniqueidentifier MovimientoSistemaFK\n        varchar(250) CorreoToken\n        bit Acuse\n        bit Autoretenedor\n        uniqueidentifier Id\n    }\n    class CodenullNotifications {\n        nvarchar(1000) Title\n        nvarchar(1000) Message\n        nvarchar(max) Action\n        nvarchar(2000) UserTo\n        datetimeoffset CreatedDate\n        datetimeoffset ReadDate\n        bit Read\n        nvarchar(200) Type\n        nvarchar(200) MessageType\n        char(36) Id\n    }\n    class CodigosPostales {\n        uniqueidentifier MunicipioFK\n        varchar(100) Tipo\n        varchar(100) PostalCodigo\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(max) Descripcion\n        uniqueidentifier Id\n    }\n    class ConceptosRetencion {\n        varchar(100) Nombre\n        decimal(10,2) TarifaDeclarante\n        decimal(10,2) TarifaNoDeclarante\n        decimal(10,2) Base\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(100) Operacion\n        varchar(100) ReteIva\n        varchar(100) Tipo\n        uniqueidentifier Id\n    }\n    class ConceptosRetencionxClientes {\n        uniqueidentifier ConceptoFK\n        uniqueidentifier ClienteFK\n        uniqueidentifier CuentaFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier CuentaNoDeclaranteFK\n        uniqueidentifier CuentaReteIvaFK\n        uniqueidentifier Id\n    }\n    class ContactosEmpresasCrm {\n        varchar(100) Nombre\n        varchar(100) Cargo\n        varchar(100) Correo\n        varchar(100) Celular\n        uniqueidentifier EmpresaCrmFk\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class CufesXML {\n        varchar(100) NumeroFactura\n        varchar(100) Emisor\n        varchar(100) TipoFactura\n        datetime2 FechaEmision\n        datetime2 FechaVencimiento\n        varchar(1000) CUFE\n        varchar(10) FormaPago\n        decimal(19,3) ValorTotal\n        varchar(max) Auxiliar\n        varchar(max) Notas\n        uniqueidentifier Id\n    }\n    class Departamentos {\n        varchar(500) Nombre\n        varchar(10) Codigo\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier PaisFK\n        uniqueidentifier Id\n    }\n    class DetallesClasificacionesCentrosCostos {\n        uniqueidentifier ClasificacionCCFK\n        uniqueidentifier CentroCostosFK\n        decimal(19,3) Porcentaje\n        uniqueidentifier CuentaFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class DetallesClasificacionesConceptos {\n        uniqueidentifier ClasificacionFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Nombre\n        varchar(100) TipoConcepto\n        varchar(1000) PalabrasClaves\n        uniqueidentifier Id\n    }\n    class DetallesFacturasRecibidasDianxAsignaciones {\n        uniqueidentifier FacturaFK\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioFK\n        uniqueidentifier Id\n    }\n    class DetallesImpuestos {\n        uniqueidentifier ImpuestoFK\n        varchar(500) Nombre\n        varchar(100) CodigoContable\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier ClienteFK\n        uniqueidentifier CuentaFK\n        bit MayorValor\n        bit DiscriminaSyB\n        uniqueidentifier CuentaServicioFK\n        uniqueidentifier CuentaBienFK\n        uniqueidentifier Id\n    }\n    class DetallesProveedores {\n        uniqueidentifier UsuarioFK\n        decimal(10,2) RangoMaximo\n        uniqueidentifier ProveedorFK\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier ClienteFK\n        decimal(10,2) RangoMinimo\n        uniqueidentifier Id\n    }\n    class EmpresasCrm {\n        varchar(100) Nombre\n        varchar(100) TipoIdentificacion\n        varchar(100) Identificacion\n        varchar(100) NombreContacto\n        varchar(100) CargoContacto\n        varchar(100) CorreoContacto\n        varchar(100) CelularContacto\n        varchar(500) Descripcion\n        uniqueidentifier SectorFK\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class EtapasCrm {\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        int Orden\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class FacturasRecibidasDian {\n        varchar(300) Cufe\n        varchar(1000) NombreEmisor\n        varchar(20) NitEmisor\n        datetime2 FechaVencimiento\n        varchar(100) Estado\n        decimal(19,3) Valor\n        datetime2 FechaEmision\n        decimal(19,3) Iva\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        uniqueidentifier ClienteFK\n        varchar(max) PdfBase\n        uniqueidentifier UsuarioAsignadoFK\n        varchar(100) Numero\n        bit Causada\n        varchar(100) Prefijo\n        varchar(100) Folio\n        uniqueidentifier CufeXMLFK\n        uniqueidentifier MotivoRechazoFK\n        datetime2 FechaRechazo\n        uniqueidentifier UsuarioRechazoFK\n        decimal(10,2) Ica\n        decimal(10,2) Ic\n        decimal(10,2) Inc\n        decimal(10,2) Timbre\n        decimal(10,2) IncBolsas\n        decimal(10,2) InCarbono\n        decimal(10,2) InCombustibles\n        decimal(10,2) IcDatos\n        decimal(10,2) Icl\n        decimal(10,2) Inpp\n        decimal(10,2) Ibua\n        decimal(10,2) Icui\n        decimal(10,2) ReteIva\n        decimal(10,2) ReteRenta\n        decimal(10,2) ReteIca\n        uniqueidentifier UsuarioAprobacionFK\n        datetime2 FechaAprobacion\n        uniqueidentifier ProveedorFK\n        uniqueidentifier CuentaPorPagarFK\n        bit CentroCostos\n        bit Pagada\n        decimal(19,3) ValorPagado\n        bit RetencionAsumida\n        decimal(19,3) ValorAPagar\n        datetime2 FechaVencimientoAprobacion\n        varchar(max) Auxiliar\n        varchar(100) FormaPago\n        bit MayorGasto\n        bit NoDeducible\n        uniqueidentifier Id\n    }\n    class FallidosCrm {\n        varchar(100) Nombre\n        varchar(100) TipoFallo\n        varchar(500) Descripcion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class GestionesCrm {\n        varchar(100) Nombre\n        uniqueidentifier TipoGestionFk\n        datetime2 FechaGestion\n        datetime2 ProximaGestion\n        uniqueidentifier CausaFK\n        varchar(100) Recordatorio\n        varchar(500) DescripcionGestion\n        varchar(100) NombreProximaGestion\n        uniqueidentifier OrigenFK\n        uniqueidentifier OportunidadCrmFK\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Descripcion\n        uniqueidentifier Id\n    }\n    class ImportsAuxiliar {\n        varchar(max) Json\n        uniqueidentifier Id\n    }\n    class Impuestos {\n        varchar(500) Nombre\n        varchar(100) Codigo\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(100) CodigoContable\n        varchar(100) Porcentaje\n        uniqueidentifier Id\n    }\n    class ImpuestosICA {\n        varchar(250) Nombre\n        decimal(19,3) Base\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Descripcion\n        decimal(19,3) Porcentaje\n        uniqueidentifier MunicipioFK\n        uniqueidentifier Id\n    }\n    class ImpuestosICAxClientes {\n        uniqueidentifier ICAFK\n        uniqueidentifier ClienteFK\n        uniqueidentifier CuentaFK\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class ItemCufeXMLAllowanceCharges {\n        varchar(100) ItemId\n        varchar(5000) AllowanceChargeReason\n        varchar(10) AmountCurrency\n        varchar(10) BaseAmountCurrency\n        uniqueidentifier ItemCufeXMLFK\n        bit ChargeIndicator\n        decimal(19,3) MultiplierFactorNumeric\n        decimal(19,3) Amount\n        decimal(19,3) BaseAmount\n        uniqueidentifier Id\n    }\n    class ItemCufeXMLTaxSubtotals {\n        uniqueidentifier ItemCufeXMLTaxFK\n        varchar(10) TaxableAmountCurrency\n        varchar(10) TaxAmountCurrency\n        varchar(10) TaxSchemeID\n        varchar(30) TaxSchemeName\n        decimal(19,3) TaxableAmount\n        decimal(19,3) TaxAmount\n        decimal(19,3) NumPercent\n        uniqueidentifier Id\n    }\n    class ItemCufeXMLTaxes {\n        uniqueidentifier ItemCufeXMLFK\n        varchar(10) TaxAmountCurrency\n        varchar(10) RoundingAmountCurrency\n        decimal(14,2) TaxAmount\n        decimal(14,2) RoundingAmount\n        uniqueidentifier Id\n    }\n    class ItemsCufeXML {\n        uniqueidentifier CufeXMLFK\n        varchar(100) ItemId\n        varchar(10) InvoiceQuantityUnitCode\n        varchar(10) LineExtensionAmountCurrency\n        bit FreeOfChargeIndicator\n        varchar(1000) Description\n        varchar(10) PriceAmountCurrency\n        varchar(100) BaseQuantityUnitCode\n        uniqueidentifier ClasificacionFK\n        uniqueidentifier CuentaK\n        uniqueidentifier ConceptoFK\n        bit CuentaNueva\n        decimal(19,3) InvoicedQuantity\n        decimal(19,3) LineExtensionAmount\n        decimal(19,3) PriceAmount\n        decimal(19,3) BaseQuantity\n        varchar(100) TipoConcepto\n        varchar(1000) PalabrasClaves\n        uniqueidentifier Id\n    }\n    class Modulos {\n        varchar(100) Nombre\n        varchar(max) Logo\n        varchar(500) Descripcion\n        varchar(100) IdMenu\n        uniqueidentifier Id\n    }\n    class MotivosRechazoFacturas {\n        varchar(100) Codigo\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class MovimientosSistemas {\n        varchar(250) Nombre\n        varchar(max) Campos\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class Municipios {\n        varchar(500) Nombre\n        varchar(10) Codigo\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier DepartamentoFK\n        uniqueidentifier Id\n    }\n    class OportunidadesCrm {\n        varchar(100) Nombre\n        uniqueidentifier ContactoEmpresaCrmFk\n        uniqueidentifier ProductosCrmFk\n        uniqueidentifier OrigenCrmFk\n        uniqueidentifier UsuarioFk\n        uniqueidentifier EtapasFk\n        uniqueidentifier CausasFk\n        uniqueidentifier TipoOportunidadFK\n        varchar(100) Prioridad\n        bit CambiarEtapa\n        varchar(500) Descripcion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier EmpresaFK\n        uniqueidentifier Id\n    }\n    class OrigenesContactosCrm {\n        varchar(100) Nombre\n        varchar(100) Cargo\n        varchar(250) Correo\n        varchar(100) Celular\n        uniqueidentifier OrigenFK\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        varchar(500) Descripcion\n        uniqueidentifier Id\n    }\n    class OrigenesCrm {\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        bit Parner\n        uniqueidentifier Id\n    }\n    class Paises {\n        varchar(100) Nombre\n        varchar(100) Codigo\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class PlandeCuentas {\n        varchar(100) Nombre\n        varchar(100) NumCuenta\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Descripcion\n        uniqueidentifier ClienteFK\n        varchar(100) CuentaOperador\n        bit CuentaAuxiliar\n        uniqueidentifier Id\n    }\n    class ProductosCrm {\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        datetime2 FechaCreacion\n        uniqueidentifier Id\n    }\n    class Proveedores {\n        uniqueidentifier TipoOrganizacionFK\n        uniqueidentifier TipoDocumentoFK\n        varchar(100) NumeroDocumento\n        varchar(250) RazonSocial\n        uniqueidentifier ActividadEconomicaFK\n        varchar(100) Direccion\n        uniqueidentifier CodigoPostalFK\n        varchar(100) TelefonoPrincipal\n        varchar(100) TelefonoAlterntivo\n        varchar(100) Correo\n        uniqueidentifier TipoDocumentoRepresentanteFK\n        varchar(100) NumeroDocumentoRepresentante\n        varchar(250) NombreCompletoRepresentante\n        bit PepRepresentante\n        varchar(100) CorreoRepresentante\n        varchar(100) TelefonoRepresentante\n        uniqueidentifier ClienteFK\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        varchar(100) Estado\n        bit AplicaRango\n        bit RFMayorValorFacturado\n        bit RFMayorTarifa\n        bit RFConBase\n        bit RFSinBase\n        bit CausarTotales\n        bit Pensionado\n        bit InteresesVivienda\n        datetime2 FechaVigenciaIntereses\n        decimal(10,2) ValorIntereses\n        bit Dependientes\n        decimal(10,2) ValorDependientes\n        datetime2 FechaVigenciaPolizaSalud\n        decimal(10,2) ValorPolizaSalud\n        bit PolizaSalud\n        uniqueidentifier CuentaPorPagarFK\n        uniqueidentifier ConceptoFK\n        uniqueidentifier CuentaFK\n        bit ReteIvaConBase\n        bit ReteIvaSinBase\n        bit RST\n        uniqueidentifier ICAFK\n        uniqueidentifier MunicipioFK\n        uniqueidentifier ClasificacionCCFK\n        bit ImpuestoMayorValor\n        bit Autoretenedor\n        uniqueidentifier Id\n    }\n    class ResponsabilidadesFiscales {\n        varchar(1000) Nombre\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(10) Codigo\n        varchar(500) PalabrasClave\n        uniqueidentifier Id\n    }\n    class ResponsabilidadesFiscalesClientes {\n        uniqueidentifier ClienteFK\n        uniqueidentifier ResposabilidadFiscalFK\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class ResponsabilidadesFiscalesProveedores {\n        uniqueidentifier ProveedorFK\n        uniqueidentifier ResposabilidadFiscalFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class ResponsabilidadesReteIva {\n        uniqueidentifier ResponsabilidadClienteFK\n        uniqueidentifier ResponsabilidadProveedorFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class ResponsabilidadesRetencion {\n        uniqueidentifier ResponsabilidadClienteFK\n        uniqueidentifier ResponsabilidadProveedorFK\n        varchar(500) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class Roles {\n        nvarchar(200) Nombre\n        uniqueidentifier ModuloFK\n        uniqueidentifier Id\n    }\n    class RolesxUsuarios {\n        uniqueidentifier UsuarioId\n        uniqueidentifier RoleId\n        uniqueidentifier Id\n    }\n    class SectoresCrm {\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class Terceros {\n        uniqueidentifier ClienteFK\n        varchar(500) Nombre\n        uniqueidentifier TipoDocumentoFK\n        varchar(100) NumeroDocumento\n        varchar(100) Celular\n        varchar(300) Email\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier Id\n    }\n    class Tickets {\n        varchar(250) Aplicacion\n        varchar(250) Email\n        varchar(250) Asunto\n        varchar(max) Cuerpo\n        varchar(100) Estado\n        varchar(100) Prioridad\n        datetime2 FechaCreacion\n        datetime2 FechaFin\n        varchar(100) Clasificacion\n        varchar(250) UsuarioAsignado\n        int Numero\n        uniqueidentifier Id\n    }\n    class TiposDocumentos {\n        varchar(200) Nombre\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(100) Codigo\n        uniqueidentifier TipoOrganizacionFK\n        uniqueidentifier Id\n    }\n    class TiposGestionCrm {\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class TiposOportunidadesCrm {\n        varchar(100) Nombre\n        varchar(500) Descripcion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        uniqueidentifier UsuarioCreacionFK\n        uniqueidentifier UsuarioModificacionFK\n        uniqueidentifier Id\n    }\n    class TiposOrganizaciones {\n        varchar(200) Nombre\n        varchar(10) Codigo\n        varchar(max) Descripcion\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(100) Tipo\n        uniqueidentifier Id\n    }\n    class TrazabilidadesCausaciones {\n        uniqueidentifier CausacionFK\n        uniqueidentifier UsuarioFK\n        datetime2 Fecha\n        varchar(max) Cambios\n        uniqueidentifier Id\n    }\n    class Usuarios {\n        varchar(200) Nombre\n        varchar(200) Apellidos\n        varchar(200) Identificacion\n        varchar(200) Clave\n        varchar(300) Correo\n        varchar(max) Foto\n        uniqueidentifier ClienteFK\n        varchar(100) CierreMes\n        uniqueidentifier Id\n    }\n    class UsuariosClientes {\n        uniqueidentifier ClienteFK\n        uniqueidentifier UsuarioModuloFK\n        uniqueidentifier UsuarioContablerFK\n        uniqueidentifier UsuarioUboraFK\n        uniqueidentifier Id\n    }\n    class UsuariosContabler {\n        uniqueidentifier ClienteFK\n        uniqueidentifier Id\n    }\n    class UsuariosModulos {\n        uniqueidentifier Id\n    }\n    class UsuariosUbora {\n        uniqueidentifier Id\n    }\n    class UsuariosxClientes {\n        uniqueidentifier ClienteFK\n        uniqueidentifier UsuarioFK\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Descripcion\n        uniqueidentifier Id\n    }\n    class Variables {\n        varchar(100) Nombre\n        varchar(100) Anio\n        uniqueidentifier UsuarioCreacion\n        uniqueidentifier UsuarioModificacion\n        datetime2 FechaCreacion\n        datetime2 FechaModificacion\n        varchar(500) Descripcion\n        decimal(10,2) Valor\n        uniqueidentifier Id\n    }\n\n    AplicacionesxUsuarios --&gt; Modulos : ModuloFKID\n    AplicacionesxUsuarios --&gt; Usuarios : UsuarioFKID\n    Causaciones --&gt; CentrosCostos : CentroCostosFKID\n    Causaciones --&gt; ClasificacionesConceptos : ClasificacionFKID\n    Causaciones --&gt; ConceptosRetencion : ConceptoFKID\n    Causaciones --&gt; CufesXML : CufeXMLFKID\n    Causaciones --&gt; FacturasRecibidasDian : FacturaFKID\n    Causaciones --&gt; Impuestos : ImpuestoFKID\n    Causaciones --&gt; ItemsCufeXML : ItemCufeXMLFKID\n    Causaciones --&gt; PlandeCuentas : CuentaFKID\n    Causaciones --&gt; Proveedores : ProveedorFKID\n    Causaciones --&gt; Terceros : TerceroFKID\n    CausacionesOriginales --&gt; CentrosCostos : CentroCostosFKID\n    CausacionesOriginales --&gt; ClasificacionesConceptos : ClasificacionFKID\n    CausacionesOriginales --&gt; ConceptosRetencion : ConceptoFKID\n    CausacionesOriginales --&gt; CufesXML : CufeXMLFKID\n    CausacionesOriginales --&gt; FacturasRecibidasDian : FacturaFKID\n    CausacionesOriginales --&gt; PlandeCuentas : CuentaFKID\n    CausacionesOriginales --&gt; Proveedores : ProveedorFKID\n    CentrosCostos --&gt; Clientes : ClienteFKID\n    CentrosCostosxfacturas --&gt; CentrosCostos : CentroCostosFKID\n    CentrosCostosxfacturas --&gt; ClasificacionesCentrosCostos : ClasificacionCCFKID\n    CentrosCostosxfacturas --&gt; FacturasRecibidasDian : FacturaFKID\n    CentrosCostosxfacturas --&gt; PlandeCuentas : CuentaFKID\n    CierresMeses --&gt; Clientes : ClienteFKID\n    ClasificacionesCentrosCostos --&gt; Clientes : ClienteFKID\n    ClasificacionesConceptos --&gt; Clientes : ClienteFKID\n    ClasificacionesConceptos --&gt; ConceptosRetencion : ConceptoFKID\n    ClasificacionesConceptos --&gt; PlandeCuentas : CuentaReteIvaFKID\n    ClasificacionesConceptos --&gt; PlandeCuentas : CuentaFKID\n    ClasificacionesConceptos --&gt; Proveedores : ProveedorFKID\n    Clientes --&gt; ActividadesEconomicas : ActividadEconomicaFKID\n    Clientes --&gt; CodigosPostales : CodigoPostalFKID\n    Clientes --&gt; MovimientosSistemas : MovimientoSistemaFKID\n    Clientes --&gt; TiposDocumentos : TipoDocumentoFKID\n    Clientes --&gt; TiposDocumentos : TipoDocumentoRepresentanteFKID\n    Clientes --&gt; TiposOrganizaciones : TipoOrganizacionFKID\n    CodigosPostales --&gt; Municipios : MunicipioFKID\n    ConceptosRetencionxClientes --&gt; Clientes : ClienteFKID\n    ConceptosRetencionxClientes --&gt; ConceptosRetencion : ConceptoFKID\n    ConceptosRetencionxClientes --&gt; PlandeCuentas : CuentaFKID\n    ConceptosRetencionxClientes --&gt; PlandeCuentas : CuentaNoDeclaranteFKID\n    ConceptosRetencionxClientes --&gt; PlandeCuentas : CuentaReteIvaFKID\n    ContactosEmpresasCrm --&gt; EmpresasCrm : EmpresaCrmFkID\n    Departamentos --&gt; Paises : PaisFKID\n    DetallesClasificacionesCentrosCostos --&gt; CentrosCostos : CentroCostosFKID\n    DetallesClasificacionesCentrosCostos --&gt; ClasificacionesCentrosCostos : ClasificacionCCFKID\n    DetallesClasificacionesCentrosCostos --&gt; PlandeCuentas : CuentaFKID\n    DetallesClasificacionesConceptos --&gt; ClasificacionesConceptos : ClasificacionFKID\n    DetallesFacturasRecibidasDianxAsignaciones --&gt; FacturasRecibidasDian : FacturaFKID\n    DetallesFacturasRecibidasDianxAsignaciones --&gt; Usuarios : UsuarioFKID\n    DetallesImpuestos --&gt; Clientes : ClienteFKID\n    DetallesImpuestos --&gt; Impuestos : ImpuestoFKID\n    DetallesImpuestos --&gt; PlandeCuentas : CuentaServicioFKID\n    DetallesImpuestos --&gt; PlandeCuentas : CuentaBienFKID\n    DetallesImpuestos --&gt; PlandeCuentas : CuentaFKID\n    DetallesProveedores --&gt; Clientes : ClienteFKID\n    DetallesProveedores --&gt; Proveedores : ProveedorFKID\n    DetallesProveedores --&gt; Usuarios : UsuarioFKID\n    EmpresasCrm --&gt; SectoresCrm : SectorFKID\n    FacturasRecibidasDian --&gt; Clientes : ClienteFKID\n    FacturasRecibidasDian --&gt; CufesXML : CufeXMLFKID\n    FacturasRecibidasDian --&gt; MotivosRechazoFacturas : MotivoRechazoFKID\n    FacturasRecibidasDian --&gt; PlandeCuentas : CuentaPorPagarFKID\n    FacturasRecibidasDian --&gt; Proveedores : ProveedorFKID\n    FacturasRecibidasDian --&gt; Usuarios : UsuarioAsignadoFKID\n    FacturasRecibidasDian --&gt; Usuarios : UsuarioRechazoFKID\n    FacturasRecibidasDian --&gt; Usuarios : UsuarioAprobacionFKID\n    GestionesCrm --&gt; FallidosCrm : CausaFKID\n    GestionesCrm --&gt; OportunidadesCrm : OportunidadCrmFKID\n    GestionesCrm --&gt; OrigenesCrm : OrigenFKID\n    GestionesCrm --&gt; TiposGestionCrm : TipoGestionFkID\n    ImpuestosICA --&gt; Municipios : MunicipioFKID\n    ImpuestosICAxClientes --&gt; Clientes : ClienteFKID\n    ImpuestosICAxClientes --&gt; ImpuestosICA : ICAFKID\n    ImpuestosICAxClientes --&gt; PlandeCuentas : CuentaFKID\n    ItemCufeXMLAllowanceCharges --&gt; ItemsCufeXML : ItemCufeXMLFKID\n    ItemCufeXMLTaxSubtotals --&gt; ItemCufeXMLTaxes : ItemCufeXMLTaxFKID\n    ItemCufeXMLTaxes --&gt; ItemsCufeXML : ItemCufeXMLFKID\n    ItemsCufeXML --&gt; ClasificacionesConceptos : ClasificacionFKID\n    ItemsCufeXML --&gt; ConceptosRetencion : ConceptoFKID\n    ItemsCufeXML --&gt; CufesXML : CufeXMLFKID\n    ItemsCufeXML --&gt; PlandeCuentas : CuentaKID\n    Municipios --&gt; Departamentos : DepartamentoFKID\n    OportunidadesCrm --&gt; ContactosEmpresasCrm : ContactoEmpresaCrmFkID\n    OportunidadesCrm --&gt; EmpresasCrm : EmpresaFKID\n    OportunidadesCrm --&gt; EtapasCrm : EtapasFkID\n    OportunidadesCrm --&gt; FallidosCrm : CausasFkID\n    OportunidadesCrm --&gt; OrigenesCrm : OrigenCrmFkID\n    OportunidadesCrm --&gt; ProductosCrm : ProductosCrmFkID\n    OportunidadesCrm --&gt; TiposOportunidadesCrm : TipoOportunidadFKID\n    OportunidadesCrm --&gt; Usuarios : UsuarioFkID\n    OrigenesContactosCrm --&gt; OrigenesCrm : OrigenFKID\n    PlandeCuentas --&gt; Clientes : ClienteFKID\n    Proveedores --&gt; ActividadesEconomicas : ActividadEconomicaFKID\n    Proveedores --&gt; ClasificacionesCentrosCostos : ClasificacionCCFKID\n    Proveedores --&gt; Clientes : ClienteFKID\n    Proveedores --&gt; CodigosPostales : CodigoPostalFKID\n    Proveedores --&gt; ConceptosRetencion : ConceptoFKID\n    Proveedores --&gt; ImpuestosICA : ICAFKID\n    Proveedores --&gt; Municipios : MunicipioFKID\n    Proveedores --&gt; PlandeCuentas : CuentaFKID\n    Proveedores --&gt; PlandeCuentas : CuentaPorPagarFKID\n    Proveedores --&gt; TiposDocumentos : TipoDocumentoFKID\n    Proveedores --&gt; TiposDocumentos : TipoDocumentoRepresentanteFKID\n    Proveedores --&gt; TiposOrganizaciones : TipoOrganizacionFKID\n    ResponsabilidadesFiscalesClientes --&gt; Clientes : ClienteFKID\n    ResponsabilidadesFiscalesClientes --&gt; ResponsabilidadesFiscales : ResposabilidadFiscalFKID\n    ResponsabilidadesFiscalesProveedores --&gt; Proveedores : ProveedorFKID\n    ResponsabilidadesFiscalesProveedores --&gt; ResponsabilidadesFiscales : ResposabilidadFiscalFKID\n    ResponsabilidadesReteIva --&gt; ResponsabilidadesFiscales : ResponsabilidadClienteFKID\n    ResponsabilidadesReteIva --&gt; ResponsabilidadesFiscales : ResponsabilidadProveedorFKID\n    ResponsabilidadesRetencion --&gt; ResponsabilidadesFiscales : ResponsabilidadProveedorFKID\n    ResponsabilidadesRetencion --&gt; ResponsabilidadesFiscales : ResponsabilidadClienteFKID\n    Roles --&gt; Modulos : ModuloFKID\n    RolesxUsuarios --&gt; Roles : RoleIdID\n    RolesxUsuarios --&gt; Usuarios : UsuarioIdID\n    Terceros --&gt; Clientes : ClienteFKID\n    Terceros --&gt; TiposDocumentos : TipoDocumentoFKID\n    TiposDocumentos --&gt; TiposOrganizaciones : TipoOrganizacionFKID\n    TrazabilidadesCausaciones --&gt; Causaciones : CausacionFKID\n    TrazabilidadesCausaciones --&gt; Usuarios : UsuarioFKID\n    Usuarios --&gt; Clientes : ClienteFKID\n    UsuariosClientes --&gt; AplicacionesxUsuarios : UsuarioModuloFKID\n    UsuariosClientes --&gt; UsuariosContabler : UsuarioContablerFKID\n    UsuariosClientes --&gt; UsuariosUbora : UsuarioUboraFKID\n    UsuariosContabler --&gt; Clientes : ClienteFKID\n    UsuariosxClientes --&gt; Clientes : ClienteFKID\n    UsuariosxClientes --&gt; Usuarios : UsuarioFKID</code></pre>"},{"location":"02_modelo_datos/02_detalle_tablas/","title":"2.2 Detalle de Tablas","text":"<p>Este documento proporciona una descripci\u00f3n detallada de cada tabla en la base de datos, incluyendo su prop\u00f3sito y los campos m\u00e1s relevantes. Las tablas se han organizado por el m\u00f3dulo o aplicaci\u00f3n a la que pertenecen l\u00f3gicamente.</p>"},{"location":"02_modelo_datos/02_detalle_tablas/#modulo-qonta-core-de-facturacion-y-causacion","title":"M\u00f3dulo Qonta (Core de Facturaci\u00f3n y Causaci\u00f3n)","text":"<p>Estas tablas forman el coraz\u00f3n del sistema Qonta, gestionando la informaci\u00f3n de facturas electr\u00f3nicas, su causaci\u00f3n contable y los datos maestros relacionados con clientes y proveedores.</p>"},{"location":"02_modelo_datos/02_detalle_tablas/#actividadeseconomicas","title":"<code>ActividadesEconomicas</code>","text":"<ul> <li>Prop\u00f3sito: Almacena el listado de actividades econ\u00f3micas de acuerdo a la clasificaci\u00f3n CIIU.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Codigo</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#causaciones","title":"<code>Causaciones</code>","text":"<ul> <li>Prop\u00f3sito: Contiene los registros detallados de las causaciones contables generadas para cada \u00edtem de una factura.</li> <li>Campos Clave: <code>Id</code> (PK), <code>FacturaFK</code> (Factura relacionada), <code>CufeXMLFK</code> (XML CUFE relacionado), <code>ItemCufeXMLFK</code> (\u00cdtem del XML CUFE), <code>ClasificacionFK</code> (Clasificaci\u00f3n del concepto), <code>CuentaFK</code> (Cuenta contable), <code>Debito</code>, <code>Credito</code>, <code>ConceptoFK</code> (Concepto de retenci\u00f3n/impuesto), <code>ProveedorFK</code>, <code>Observaciones</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#causacionesoriginales","title":"<code>CausacionesOriginales</code>","text":"<ul> <li>Prop\u00f3sito: Almacena una copia de las causaciones originales generadas antes de cualquier modificaci\u00f3n, para prop\u00f3sitos de auditor\u00eda y trazabilidad.</li> <li>Campos Clave: <code>Id</code> (PK), <code>FacturaFK</code>, <code>CufeXMLFK</code>, <code>ClasificacionFK</code>, <code>CuentaFK</code>, <code>Debito</code>, <code>Credito</code>, <code>Modificada</code> (Indica si fue modificada).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#centroscostos","title":"<code>CentrosCostos</code>","text":"<ul> <li>Prop\u00f3sito: Gestiona los centros de costos definidos por cada cliente.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Codigo</code>, <code>ClienteFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#centroscostosxfacturas","title":"<code>CentrosCostosxfacturas</code>","text":"<ul> <li>Prop\u00f3sito: Relaciona los centros de costos con las facturas, permitiendo la distribuci\u00f3n de valores.</li> <li>Campos Clave: <code>Id</code> (PK), <code>CentroCostosFK</code>, <code>CuentaFK</code>, <code>FacturaFK</code>, <code>Porcentaje</code>, <code>Valor</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#cierresmeses","title":"<code>CierresMeses</code>","text":"<ul> <li>Prop\u00f3sito: Registra los cierres de mes contables para cada cliente, indicando si un per\u00edodo est\u00e1 cerrado para causaciones.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Mes</code>, <code>Anio</code>, <code>Estado</code>, <code>ClienteFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#clasificacionescentroscostos","title":"<code>ClasificacionesCentrosCostos</code>","text":"<ul> <li>Prop\u00f3sito: Permite agrupar o clasificar centros de costos para una gesti\u00f3n m\u00e1s organizada.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Descripcion</code>, <code>ClienteFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#clasificacionesconceptos","title":"<code>ClasificacionesConceptos</code>","text":"<ul> <li>Prop\u00f3sito: Define clasificaciones para los conceptos de gasto o ingreso, asoci\u00e1ndolos a proveedores y cuentas contables espec\u00edficas.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ProveedorFK</code>, <code>ConceptoFK</code>, <code>ClienteFK</code>, <code>CuentaFK</code>, <code>AplicaCentroCosto</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#clientes","title":"<code>Clientes</code>","text":"<ul> <li>Prop\u00f3sito: Almacena la informaci\u00f3n de los clientes (empresas) que utilizan el sistema Qonta.</li> <li>Campos Clave: <code>Id</code> (PK), <code>NumeroDocumento</code>, <code>RazonSocial</code>, <code>ActividadEconomicaFK</code>, <code>Correo</code>, <code>Estado</code>, <code>Acuse</code>, <code>Autoretenedor</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#codigospostales","title":"<code>CodigosPostales</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de c\u00f3digos postales.</li> <li>Campos Clave: <code>Id</code> (PK), <code>PostalCodigo</code>, <code>MunicipioFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#conceptosretencion","title":"<code>ConceptosRetencion</code>","text":"<ul> <li>Prop\u00f3sito: Define los diferentes conceptos de retenci\u00f3n con sus tarifas y bases aplicables.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>TarifaDeclarante</code>, <code>TarifaNoDeclarante</code>, <code>Base</code>, <code>Tipo</code> (ReteFuente, ReteIVA, ReteICA).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#conceptosretencionxclientes","title":"<code>ConceptosRetencionxClientes</code>","text":"<ul> <li>Prop\u00f3sito: Asocia conceptos de retenci\u00f3n espec\u00edficos a cada cliente, permitiendo la personalizaci\u00f3n de las cuentas contables asociadas.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ConceptoFK</code>, <code>ClienteFK</code>, <code>CuentaFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#cufesxml","title":"<code>CufesXML</code>","text":"<ul> <li>Prop\u00f3sito: Almacena los datos principales extra\u00eddos de los archivos XML de facturas electr\u00f3nicas, identificados por su CUFE.</li> <li>Campos Clave: <code>Id</code> (PK), <code>CUFE</code>, <code>NumeroFactura</code>, <code>Emisor</code>, <code>FechaEmision</code>, <code>ValorTotal</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#departamentos","title":"<code>Departamentos</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de departamentos de Colombia.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Codigo</code>, <code>PaisFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#detallesclasificacionescentroscostos","title":"<code>DetallesClasificacionesCentrosCostos</code>","text":"<ul> <li>Prop\u00f3sito: Define los detalles y porcentajes de distribuci\u00f3n para una clasificaci\u00f3n de centro de costos.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClasificacionCCFK</code>, <code>CentroCostosFK</code>, <code>Porcentaje</code>, <code>CuentaFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#detallesclasificacionesconceptos","title":"<code>DetallesClasificacionesConceptos</code>","text":"<ul> <li>Prop\u00f3sito: Proporciona los detalles de una clasificaci\u00f3n de concepto, incluyendo palabras clave para el reconocimiento.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClasificacionFK</code>, <code>Nombre</code>, <code>TipoConcepto</code>, <code>PalabrasClaves</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#detallesimpuestos","title":"<code>DetallesImpuestos</code>","text":"<ul> <li>Prop\u00f3sito: Configuraci\u00f3n detallada de los impuestos para cada cliente, incluyendo cuentas contables asociadas.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ImpuestoFK</code>, <code>ClienteFK</code>, <code>CuentaFK</code>, <code>MayorValor</code>, <code>DiscriminaSyB</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#detallesproveedores","title":"<code>DetallesProveedores</code>","text":"<ul> <li>Prop\u00f3sito: Define rangos y configuraciones espec\u00edficas de usuarios para la gesti\u00f3n de proveedores.</li> <li>Campos Clave: <code>Id</code> (PK), <code>UsuarioFK</code>, <code>ProveedorFK</code>, <code>ClienteFK</code>, <code>RangoMinimo</code>, <code>RangoMaximo</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#facturasrecibidasdian","title":"<code>FacturasRecibidasDian</code>","text":"<ul> <li>Prop\u00f3sito: Registra las facturas electr\u00f3nicas recibidas directamente de la DIAN o a trav\u00e9s del proveedor tecnol\u00f3gico.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Cufe</code>, <code>NombreEmisor</code>, <code>NitEmisor</code>, <code>Numero</code>, <code>FechaEmision</code>, <code>Valor</code>, <code>Estado</code>, <code>Causada</code>, <code>ClienteFK</code>, <code>ProveedorFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#importsauxiliar","title":"<code>ImportsAuxiliar</code>","text":"<ul> <li>Prop\u00f3sito: Tabla auxiliar para la importaci\u00f3n temporal de datos.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Json</code> (Almacena el JSON a importar).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#impuestos","title":"<code>Impuestos</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de impuestos generales (IVA, ICA, etc.).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Codigo</code>, <code>Porcentaje</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#impuestosica","title":"<code>ImpuestosICA</code>","text":"<ul> <li>Prop\u00f3sito: Define las tarifas y bases de Impuesto de Industria y Comercio (ICA) por municipio.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Porcentaje</code>, <code>Base</code>, <code>MunicipioFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#impuestosicaxclientes","title":"<code>ImpuestosICAxClientes</code>","text":"<ul> <li>Prop\u00f3sito: Asocia los impuestos ICA a los clientes, con la cuenta contable correspondiente.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ICAFK</code>, <code>ClienteFK</code>, <code>CuentaFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#itemcufexmlallowancecharges","title":"<code>ItemCufeXMLAllowanceCharges</code>","text":"<ul> <li>Prop\u00f3sito: Detalles de descuentos o cargos aplicados a \u00edtems espec\u00edficos dentro del XML CUFE.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ItemCufeXMLFK</code>, <code>AllowanceChargeReason</code>, <code>Amount</code>, <code>ChargeIndicator</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#itemcufexmltaxsubtotals","title":"<code>ItemCufeXMLTaxSubtotals</code>","text":"<ul> <li>Prop\u00f3sito: Subtotales de impuestos para cada \u00edtem de una factura, como se detalla en el XML CUFE.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ItemCufeXMLTaxFK</code>, <code>TaxSchemeName</code>, <code>TaxableAmount</code>, <code>TaxAmount</code>, <code>NumPercent</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#itemcufexmltaxes","title":"<code>ItemCufeXMLTaxes</code>","text":"<ul> <li>Prop\u00f3sito: Resumen de los impuestos aplicados a un \u00edtem del XML CUFE.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ItemCufeXMLFK</code>, <code>TaxAmount</code>, <code>RoundingAmount</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#itemscufexml","title":"<code>ItemsCufeXML</code>","text":"<ul> <li>Prop\u00f3sito: Almacena la informaci\u00f3n de cada \u00edtem (producto/servicio) de una factura electr\u00f3nica extra\u00edda del XML CUFE.</li> <li>Campos Clave: <code>Id</code> (PK), <code>CufeXMLFK</code>, <code>ItemId</code>, <code>Description</code>, <code>InvoicedQuantity</code>, <code>LineExtensionAmount</code>, <code>ClasificacionFK</code>, <code>ConceptoFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#motivosrechazofacturas","title":"<code>MotivosRechazoFacturas</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de motivos predefinidos para el rechazo de facturas.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Codigo</code>, <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#movimientossistemas","title":"<code>MovimientosSistemas</code>","text":"<ul> <li>Prop\u00f3sito: Registra los tipos de movimientos contables o de sistema que pueden ser configurados por el cliente.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Campos</code> (JSON para configuraci\u00f3n de campos).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#municipios","title":"<code>Municipios</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de municipios de Colombia.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Codigo</code>, <code>DepartamentoFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#paises","title":"<code>Paises</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de pa\u00edses.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Codigo</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#plandecuentas","title":"<code>PlandeCuentas</code>","text":"<ul> <li>Prop\u00f3sito: Almacena el plan de cuentas contable de cada cliente.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>NumCuenta</code>, <code>ClienteFK</code>, <code>CuentaAuxiliar</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#proveedores","title":"<code>Proveedores</code>","text":"<ul> <li>Prop\u00f3sito: Gestiona la informaci\u00f3n de los proveedores de cada cliente, incluyendo datos fiscales y configuraciones de retenci\u00f3n.</li> <li>Campos Clave: <code>Id</code> (PK), <code>NumeroDocumento</code>, <code>RazonSocial</code>, <code>ClienteFK</code>, <code>Estado</code>, <code>AplicaRango</code>, <code>Autoretenedor</code>, <code>CuentaPorPagarFK</code>, <code>ConceptoFK</code>, <code>ICAFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#responsabilidadesfiscales","title":"<code>ResponsabilidadesFiscales</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de responsabilidades fiscales de la DIAN.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Codigo</code>, <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#responsabilidadesfiscalesclientes","title":"<code>ResponsabilidadesFiscalesClientes</code>","text":"<ul> <li>Prop\u00f3sito: Asocia las responsabilidades fiscales a cada cliente.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClienteFK</code>, <code>ResposabilidadFiscalFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#responsabilidadesfiscalesproveedores","title":"<code>ResponsabilidadesFiscalesProveedores</code>","text":"<ul> <li>Prop\u00f3sito: Asocia las responsabilidades fiscales a cada proveedor.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ProveedorFK</code>, <code>ResposabilidadFiscalFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#responsabilidadesreteiva","title":"<code>ResponsabilidadesReteIva</code>","text":"<ul> <li>Prop\u00f3sito: Define las reglas de aplicaci\u00f3n de retenci\u00f3n de IVA basadas en las responsabilidades fiscales del cliente y proveedor.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ResponsabilidadClienteFK</code>, <code>ResponsabilidadProveedorFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#responsabilidadesretencion","title":"<code>ResponsabilidadesRetencion</code>","text":"<ul> <li>Prop\u00f3sito: Define las reglas de aplicaci\u00f3n de retenci\u00f3n en la fuente basadas en las responsabilidades fiscales del cliente y proveedor.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ResponsabilidadClienteFK</code>, <code>ResponsabilidadProveedorFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#terceros","title":"<code>Terceros</code>","text":"<ul> <li>Prop\u00f3sito: Registro de terceros involucrados en transacciones, distintos de clientes y proveedores.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClienteFK</code>, <code>Nombre</code>, <code>NumeroDocumento</code>, <code>Email</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#tiposdocumentos","title":"<code>TiposDocumentos</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de tipos de documentos de identificaci\u00f3n (CC, NIT, CE, etc.).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Codigo</code>, <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#tiposorganizaciones","title":"<code>TiposOrganizaciones</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de tipos de organizaci\u00f3n (Persona Natural, Persona Jur\u00eddica, etc.).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Codigo</code>, <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#trazabilidadescausaciones","title":"<code>TrazabilidadesCausaciones</code>","text":"<ul> <li>Prop\u00f3sito: Registra el historial de cambios y aprobaciones de cada causaci\u00f3n.</li> <li>Campos Clave: <code>Id</code> (PK), <code>CausacionFK</code>, <code>UsuarioFK</code>, <code>Fecha</code>, <code>Cambios</code> (Descripci\u00f3n del cambio).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#usuarios","title":"<code>Usuarios</code>","text":"<ul> <li>Prop\u00f3sito: Almacena la informaci\u00f3n de los usuarios que acceden al sistema.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Apellidos</code>, <code>Correo</code>, <code>Identificacion</code>, <code>ClienteFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#usuariosxclientes","title":"<code>UsuariosxClientes</code>","text":"<ul> <li>Prop\u00f3sito: Relaciona a los usuarios con los clientes a los que tienen acceso.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClienteFK</code>, <code>UsuarioFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#variables","title":"<code>Variables</code>","text":"<ul> <li>Prop\u00f3sito: Permite almacenar variables de configuraci\u00f3n del sistema que pueden variar anualmente o por configuraci\u00f3n.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Anio</code>, <code>Valor</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#modulo-crm-gestion-de-relacion-con-el-cliente","title":"M\u00f3dulo CRM (Gesti\u00f3n de Relaci\u00f3n con el Cliente)","text":"<p>Estas tablas est\u00e1n dedicadas a la gesti\u00f3n de oportunidades, contactos, empresas y el seguimiento comercial.</p>"},{"location":"02_modelo_datos/02_detalle_tablas/#contactosempresascrm","title":"<code>ContactosEmpresasCrm</code>","text":"<ul> <li>Prop\u00f3sito: Almacena la informaci\u00f3n de contactos dentro de empresas que son clientes o prospectos del CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Correo</code>, <code>EmpresaCrmFk</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#empresascrm","title":"<code>EmpresasCrm</code>","text":"<ul> <li>Prop\u00f3sito: Registra la informaci\u00f3n de las empresas con las que se interact\u00faa a trav\u00e9s del CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Identificacion</code>, <code>SectorFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#etapascrm","title":"<code>EtapasCrm</code>","text":"<ul> <li>Prop\u00f3sito: Define las etapas del embudo de ventas o proceso comercial dentro del CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Orden</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#fallidoscrm","title":"<code>FallidosCrm</code>","text":"<ul> <li>Prop\u00f3sito: Registra los motivos de oportunidades fallidas o no concretadas en el CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>TipoFallo</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#gestionescrm","title":"<code>GestionesCrm</code>","text":"<ul> <li>Prop\u00f3sito: Detalla las interacciones y seguimientos realizados con los contactos o empresas del CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>TipoGestionFk</code>, <code>FechaGestion</code>, <code>OportunidadCrmFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#oportunidadescrm","title":"<code>OportunidadesCrm</code>","text":"<ul> <li>Prop\u00f3sito: Representa una oportunidad de negocio o venta en el ciclo comercial.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>ContactoEmpresaCrmFk</code>, <code>EtapasFk</code>, <code>Prioridad</code>, <code>EmpresaFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#origenescontactoscrm","title":"<code>OrigenesContactosCrm</code>","text":"<ul> <li>Prop\u00f3sito: Registra los or\u00edgenes de los contactos del CRM (ej. referencia, web, evento).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>OrigenFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#origenescrm","title":"<code>OrigenesCrm</code>","text":"<ul> <li>Prop\u00f3sito: Define las fuentes o canales de donde provienen los leads y oportunidades.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Parner</code> (Indicador si es un partner).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#productoscrm","title":"<code>ProductosCrm</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de productos o servicios que ofrece la empresa en el contexto del CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>Descripcion</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#sectorescrm","title":"<code>SectoresCrm</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de sectores econ\u00f3micos a los que pertenecen las empresas del CRM.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#tiposgestioncrm","title":"<code>TiposGestionCrm</code>","text":"<ul> <li>Prop\u00f3sito: Define los tipos de gestiones o actividades que se pueden registrar en el CRM (llamada, reuni\u00f3n, correo).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#tiposoportunidadescrm","title":"<code>TiposOportunidadesCrm</code>","text":"<ul> <li>Prop\u00f3sito: Define los tipos de oportunidades de negocio (ej. nueva venta, upsell).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#modulo-general-seguridad-infraestructura-comunes-a-todas-las-aplicaciones","title":"M\u00f3dulo General / Seguridad / Infraestructura (Comunes a todas las aplicaciones)","text":"<p>Estas tablas son de uso transversal y soportan la operaci\u00f3n de m\u00faltiples aplicaciones, incluyendo Qonta y CRM.</p>"},{"location":"02_modelo_datos/02_detalle_tablas/#aplicacionesxusuarios","title":"<code>AplicacionesxUsuarios</code>","text":"<ul> <li>Prop\u00f3sito: Asocia a los usuarios con las diferentes aplicaciones o m\u00f3dulos a los que tienen acceso.</li> <li>Campos Clave: <code>Id</code> (PK), <code>UsuarioFK</code>, <code>ModuloFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#codenullnotifications","title":"<code>CodenullNotifications</code>","text":"<ul> <li>Prop\u00f3sito: Almacena notificaciones internas del sistema para los usuarios.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Title</code>, <code>Message</code>, <code>UserTo</code>, <code>Read</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#detallesfacturasrecibidasdianxasignaciones","title":"<code>DetallesFacturasRecibidasDianxAsignaciones</code>","text":"<ul> <li>Prop\u00f3sito: Gestiona la asignaci\u00f3n de facturas DIAN a usuarios espec\u00edficos para su gesti\u00f3n.</li> <li>Campos Clave: <code>Id</code> (PK), <code>FacturaFK</code>, <code>UsuarioFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#modulos","title":"<code>Modulos</code>","text":"<ul> <li>Prop\u00f3sito: Cat\u00e1logo de los diferentes m\u00f3dulos o aplicaciones que componen el sistema (Qonta, CRM, etc.).</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>IdMenu</code> (ID para la interfaz de usuario).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#roles","title":"<code>Roles</code>","text":"<ul> <li>Prop\u00f3sito: Define los roles de usuario dentro del sistema, asociados a m\u00f3dulos espec\u00edficos.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Nombre</code>, <code>ModuloFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#rolesxusuarios","title":"<code>RolesxUsuarios</code>","text":"<ul> <li>Prop\u00f3sito: Asocia roles espec\u00edficos a los usuarios.</li> <li>Campos Clave: <code>Id</code> (PK), <code>UsuarioId</code>, <code>RoleId</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#tickets","title":"<code>Tickets</code>","text":"<ul> <li>Prop\u00f3sito: Sistema de tickets o incidencias.</li> <li>Campos Clave: <code>Id</code> (PK), <code>Numero</code>, <code>Aplicacion</code>, <code>Asunto</code>, <code>Estado</code>, <code>UsuarioAsignado</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#usuariosclientes","title":"<code>UsuariosClientes</code>","text":"<ul> <li>Prop\u00f3sito: Relaciona los usuarios principales de un cliente con sus contrapartes en otros sistemas (Ubora, Contabler, etc.), si aplica.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClienteFK</code>, <code>UsuarioModuloFK</code>, <code>UsuarioContablerFK</code>, <code>UsuarioUboraFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#usuarioscontabler","title":"<code>UsuariosContabler</code>","text":"<ul> <li>Prop\u00f3sito: Tabla de usuarios espec\u00edficos para el m\u00f3dulo de Contabilidad.</li> <li>Campos Clave: <code>Id</code> (PK), <code>ClienteFK</code>.</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#usuariosmodulos","title":"<code>UsuariosModulos</code>","text":"<ul> <li>Prop\u00f3sito: Tabla gen\u00e9rica para usuarios de m\u00f3dulos, probablemente para extensiones futuras.</li> <li>Campos Clave: <code>Id</code> (PK).</li> </ul>"},{"location":"02_modelo_datos/02_detalle_tablas/#usuariosubora","title":"<code>UsuariosUbora</code>","text":"<ul> <li>Prop\u00f3sito: Tabla de usuarios espec\u00edficos para el m\u00f3dulo Ubora.</li> <li>Campos Clave: <code>Id</code> (PK).</li> </ul>"},{"location":"03_arquitectura/","title":"3. Arquitectura \u2699\ufe0f","text":"<p>Esta secci\u00f3n describe la arquitectura t\u00e9cnica de alto nivel de Qonta, incluyendo las capas de la aplicaci\u00f3n, los contenedores de software y c\u00f3mo las diferentes aplicaciones (Qonta Core, CRM, etc.) interact\u00faan entre s\u00ed.</p> <p>Documentos en esta secci\u00f3n:</p> <ul> <li>3.1 Arquitectura T\u00e9cnica: Diagramas C4 (Contexto y Contenedores) y patrones de dise\u00f1o.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/","title":"3. Arquitectura T\u00e9cnica de Qonta","text":"<p>Este documento describe la arquitectura t\u00e9cnica del sistema Qonta, incluyendo sus componentes principales, c\u00f3mo interact\u00faan las diferentes aplicaciones (Qonta Core, CRM, etc.), la estructura de la base de datos y los patrones de integraci\u00f3n.</p>"},{"location":"03_arquitectura/arquitectura_tecnica/#31-vista-general-de-la-arquitectura","title":"3.1 Vista General de la Arquitectura","text":"<p>Qonta se concibe como un ecosistema de microservicios o m\u00f3dulos l\u00f3gicos interconectados, construidos sobre una base de datos centralizada. La arquitectura est\u00e1 dise\u00f1ada para ser escalable, extensible y f\u00e1cil de mantener, permitiendo la adici\u00f3n de nuevas funcionalidades y la integraci\u00f3n con sistemas externos.</p> <pre><code>C4Context\n    title Sistema Qonta - Diagrama de Contexto\n\n    Person(usuario_cliente, \"Usuario Cliente\", \"Empresario, contador o auxiliar que gestiona facturas.\")\n    Person(admin_qonta, \"Administrador Qonta\", \"Personal t\u00e9cnico o de soporte de Qonta.\")\n    Person(integrador_externo, \"Integrador Externo\", \"Sistemas externos que consumen la API de Qonta.\")\n\n    System(qonta_sistema, \"Sistema Qonta\", \"Sistema de automatizaci\u00f3n de acuse y causaci\u00f3n de facturas electr\u00f3nicas en Colombia.\")\n\n    System_Ext(dian, \"DIAN (Servicio Web)\", \"Direcci\u00f3n de Impuestos y Aduanas Nacionales de Colombia. Fuente oficial de facturas electr\u00f3nicas.\")\n    System_Ext(kiai_pt, \"Kiai (Proveedor Tecnol\u00f3gico)\", \"Proveedor Tecnol\u00f3gico autorizado por la DIAN para el acuse de facturas.\")\n    System_Ext(erp_contable, \"ERP Contable Cliente\", \"Sistema ERP del cliente (e.g., Siigo, Siesa) para la importaci\u00f3n de causaciones.\")\n    System_Ext(smtp_server, \"Servidor SMTP\", \"Servicio de env\u00edo de correos electr\u00f3nicos.\")\n\n    Rel(usuario_cliente, qonta_sistema, \"Interact\u00faa a trav\u00e9s de la interfaz web\")\n    Rel(admin_qonta, qonta_sistema, \"Administra y monitorea\")\n    Rel(integrador_externo, qonta_sistema, \"Consume API GraphQL\", \"HTTPS\")\n\n    Rel(qonta_sistema, dian, \"Descarga facturas\", \"Bot web scraping\")\n    Rel(qonta_sistema, kiai_pt, \"Env\u00eda solicitudes de acuse\", \"API REST / HTTPS\")\n    Rel(qonta_sistema, erp_contable, \"Exporta causaciones\", \"Archivos planos / API (futuro)\")\n    Rel(qonta_sistema, smtp_server, \"Env\u00eda notificaciones\", \"SMTP\")</code></pre>"},{"location":"03_arquitectura/arquitectura_tecnica/#32-aplicaciones-y-modulos-principales","title":"3.2 Aplicaciones y M\u00f3dulos Principales","text":"<p>El sistema se compone de las siguientes aplicaciones l\u00f3gicas que comparten la misma base de datos y, en muchos casos, la misma capa de autenticaci\u00f3n y autorizaci\u00f3n.</p>"},{"location":"03_arquitectura/arquitectura_tecnica/#321-qonta-core-modulo-principal","title":"3.2.1 Qonta Core (M\u00f3dulo Principal)","text":"<p>Es la aplicaci\u00f3n central de Qonta, encargada de las funcionalidades principales de facturaci\u00f3n electr\u00f3nica y causaci\u00f3n.</p> <ul> <li>Responsabilidades:<ul> <li>Descarga y procesamiento de facturas electr\u00f3nicas desde la DIAN.</li> <li>Gesti\u00f3n del ciclo de vida de las facturas (recibidas, aprobadas, rechazadas, causadas).</li> <li>Acuse de facturas con el proveedor tecnol\u00f3gico (Kiai).</li> <li>Motor de causaci\u00f3n contable basado en reglas de negocio din\u00e1micas (Hooks).</li> <li>Administraci\u00f3n de datos maestros (Clientes, Proveedores, Plan de Cuentas, Centros de Costos, Impuestos, etc.).</li> <li>Generaci\u00f3n de reportes y exportaci\u00f3n de movimientos contables para ERPs.</li> </ul> </li> <li>Tecnolog\u00edas Clave: Node.js, Express, Sequelize (ORM), GraphQL, JavaScript (para Hooks), SQL Server (Base de Datos).</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#322-modulo-crm-customer-relationship-management","title":"3.2.2 M\u00f3dulo CRM (Customer Relationship Management)","text":"<p>Gestiona las relaciones comerciales, oportunidades de venta y seguimiento con prospectos y clientes.</p> <ul> <li>Responsabilidades:<ul> <li>Gesti\u00f3n de contactos y empresas.</li> <li>Seguimiento de oportunidades de negocio.</li> <li>Registro de gestiones y actividades comerciales.</li> <li>Administraci\u00f3n de productos y servicios de Qonta.</li> <li>Generaci\u00f3n de informes de ventas.</li> </ul> </li> <li>Integraci\u00f3n con Qonta Core: Comparte usuarios y posiblemente informaci\u00f3n de clientes existentes que se convierten en usuarios de Qonta. Podr\u00eda haber triggers desde el CRM que inicien procesos en Qonta (ej. un cliente ganado en CRM activa la creaci\u00f3n en Qonta).</li> <li>Tecnolog\u00edas Clave: Node.js, Express, Sequelize (ORM), GraphQL, SQL Server.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#323-modulo-de-seguridad-y-administracion-comun","title":"3.2.3 M\u00f3dulo de Seguridad y Administraci\u00f3n (Com\u00fan)","text":"<p>Aunque no es una \"aplicaci\u00f3n\" separada en el sentido de interfaz de usuario, este m\u00f3dulo representa el conjunto de funcionalidades transversales para la gesti\u00f3n de usuarios, roles, permisos y configuraciones generales del sistema.</p> <ul> <li>Responsabilidades:<ul> <li>Autenticaci\u00f3n de usuarios.</li> <li>Autorizaci\u00f3n basada en roles y permisos.</li> <li>Gesti\u00f3n de m\u00f3dulos y acceso por usuario.</li> <li>Registro de notificaciones.</li> <li>Auditor\u00eda de acciones de usuario.</li> </ul> </li> <li>Integraci\u00f3n con otros m\u00f3dulos: Es utilizado por Qonta Core, CRM y cualquier otra aplicaci\u00f3n que se a\u00f1ada al ecosistema.</li> <li>Tecnolog\u00edas Clave: Node.js, Express, JWT (JSON Web Tokens), SQL Server.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#33-base-de-datos","title":"3.3 Base de Datos","text":"<p>El sistema utiliza una base de datos SQL Server centralizada.</p> <ul> <li>Dise\u00f1o: Modelo Entidad-Relaci\u00f3n relacional, normalizado para garantizar la integridad de los datos.</li> <li>Acceso: Principalmente a trav\u00e9s de Sequelize ORM para la capa de aplicaci\u00f3n, aunque tambi\u00e9n se utilizan consultas SQL directas para optimizaciones o l\u00f3gica compleja.</li> <li>Integridad de Datos: Uso de claves primarias (PK), claves for\u00e1neas (FK), \u00edndices y restricciones para mantener la consistencia.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#34-capas-de-la-aplicacion","title":"3.4 Capas de la Aplicaci\u00f3n","text":"<p>La arquitectura de cada aplicaci\u00f3n sigue un patr\u00f3n de capas bien definido:</p> <ol> <li>Capa de Presentaci\u00f3n (Frontend): Interfaces de usuario para Qonta y CRM (probablemente Angular/React/Vue).</li> <li>Capa de API (GraphQL): Expone las funcionalidades del backend a los frontends y a integraciones externas. Utiliza GraphQL para consultas flexibles y eficientes.</li> <li>Capa de L\u00f3gica de Negocio (Servicios/Controladores): Contiene la l\u00f3gica central de cada m\u00f3dulo, coordinando las operaciones, aplicando reglas y gestionando transacciones. Aqu\u00ed tambi\u00e9n residen los \"Hooks\".</li> <li>Capa de Acceso a Datos (ORM/Repositorio): Interact\u00faa directamente con la base de datos (Sequelize ORM), abstrayendo la l\u00f3gica de persistencia.</li> </ol> <pre><code>C4Container\n    title Contenedores del Sistema Qonta\n\n    System_Ext(dian, \"DIAN (Servicio Web)\", \"Direcci\u00f3n de Impuestos y Aduanas Nacionales de Colombia.\")\n    System_Ext(kiai_pt, \"Kiai (Proveedor Tecnol\u00f3gico)\", \"Proveedor Tecnol\u00f3gico autorizado por la DIAN.\")\n    System_Ext(erp_contable, \"ERP Contable Cliente\", \"Sistema ERP del cliente (ej. Siigo).\")\n\n    Person(usuario_web, \"Usuario Web\", \"Usuario de Qonta o CRM a trav\u00e9s del navegador.\")\n    Person(usuario_bot, \"Usuario Bot DIAN\", \"Configura y monitoriza el Bot de descarga.\")\n    Person(integrador_api, \"Integrador API\", \"Aplicaci\u00f3n externa que consume la API GraphQL.\")\n\n    Container(spa_qonta, \"Aplicaci\u00f3n Web (SPA) Qonta\", \"Aplicaci\u00f3n de una sola p\u00e1gina (Single Page Application) para la interfaz de usuario de Qonta.\", \"React/Angular/Vue.js\")\n    Container(spa_crm, \"Aplicaci\u00f3n Web (SPA) CRM\", \"Aplicaci\u00f3n de una sola p\u00e1gina para la interfaz de usuario del CRM.\", \"React/Angular/Vue.js\")\n    Container(api_gateway, \"API Gateway / GraphQL Server\", \"Servidor de aplicaci\u00f3n principal que expone la API GraphQL para todos los m\u00f3dulos.\", \"Node.js, Express, Apollo Server\")\n    Container(microservicio_bot_dian, \"Microservicio Bot DIAN\", \"Servicio dedicado a la automatizaci\u00f3n de la descarga de facturas desde la DIAN.\", \"Python/Node.js, Puppeteer/Selenium\")\n    Container(microservicio_xml_extract, \"Microservicio XML Extract\", \"Servicio local que parsea XMLs de DIAN e inserta en DB.\", \"Node.js, Prisma\")\n    Container(db, \"Base de Datos\", \"Base de datos relacional persistente.\", \"SQL Server\")\n\n    Rel(usuario_web, spa_qonta, \"Usa\", \"HTTPS\")\n    Rel(usuario_web, spa_crm, \"Usa\", \"HTTPS\")\n    Rel(spa_qonta, api_gateway, \"Realiza consultas y mutaciones\", \"GraphQL/HTTPS\")\n    Rel(spa_crm, api_gateway, \"Realiza consultas y mutaciones\", \"GraphQL/HTTPS\")\n    Rel(integrador_api, api_gateway, \"Consume API\", \"GraphQL/HTTPS\")\n    Rel(api_gateway, db, \"Lee y escribe datos\", \"JDBC/ODBC\")\n\n    Rel(microservicio_bot_dian, dian, \"Interact\u00faa con interfaz web\", \"HTTP/Web Scraping\")\n    Rel(microservicio_bot_dian, microservicio_xml_extract, \"Almacena XML/PDF localmente\")\n    Rel(microservicio_xml_extract, db, \"Inserta datos de facturas\", \"JDBC/ODBC, Prisma\")\n    Rel(microservicio_xml_extract, api_gateway, \"Dispara Hooks (e.g., CrearProveedor)\", \"GraphQL/HTTPS\")\n    Rel(api_gateway, kiai_pt, \"Env\u00eda solicitudes de acuse\", \"API REST/HTTPS\")\n    Rel(api_gateway, erp_contable, \"Genera archivos para exportaci\u00f3n\", \"Sistema de Archivos\")\n    Rel(usuario_bot, microservicio_bot_dian, \"Configura y monitoriza\")</code></pre>"},{"location":"03_arquitectura/arquitectura_tecnica/#35-patrones-de-integracion","title":"3.5 Patrones de Integraci\u00f3n","text":""},{"location":"03_arquitectura/arquitectura_tecnica/#351-api-graphql","title":"3.5.1 API GraphQL","text":"<ul> <li>Prop\u00f3sito: Interfaz principal para la comunicaci\u00f3n entre el frontend y el backend, y para integraciones de terceros.</li> <li>Beneficios: Flexibilidad para los clientes de la API al solicitar solo los datos que necesitan, reduciendo la sobre-obtenci\u00f3n y sub-obtenci\u00f3n de datos. Documentaci\u00f3n auto-generada (Schema).</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#352-hooks-event-driven","title":"3.5.2 Hooks (Event-Driven)","text":"<ul> <li>Prop\u00f3sito: Permite la extensibilidad del sistema y la adaptaci\u00f3n a reglas de negocio espec\u00edficas de cada cliente sin modificar el c\u00f3digo base.</li> <li>Mecanismo: Basado en eventos. En puntos espec\u00edficos del flujo de negocio (ej. <code>despu\u00e9s de guardar factura</code>, <code>antes de generar causaci\u00f3n</code>), el sistema invoca c\u00f3digo JavaScript personalizado (hooks) que puede leer, modificar o cancelar operaciones. Los hooks se almacenan en la base de datos y se ejecutan en un entorno seguro (sandbox).</li> <li>Uso: Ideal para implementar l\u00f3gica de causaci\u00f3n compleja, validaciones espec\u00edficas, notificaciones personalizadas, etc.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#353-bot-de-web-scraping-dian","title":"3.5.3 Bot de Web Scraping (DIAN)","text":"<ul> <li>Prop\u00f3sito: Automatiza la descarga masiva de facturas electr\u00f3nicas directamente desde la plataforma de la DIAN.</li> <li>Mecanismo: Un microservicio independiente utiliza librer\u00edas de automatizaci\u00f3n de navegador (ej. Puppeteer/Selenium) para simular la interacci\u00f3n humana con el portal de la DIAN, descargar los XML y PDFs de las facturas y luego enviarlos a un sistema de procesamiento para su ingesti\u00f3n.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#354-procesamiento-local-de-xml-project-extract-xml","title":"3.5.4 Procesamiento Local de XML (Project Extract XML)","text":"<ul> <li>Prop\u00f3sito: Parsear y estructurar la informaci\u00f3n de los XML descargados por el Bot DIAN antes de insertarla en la base de datos de Qonta.</li> <li>Mecanismo: Un microservicio local basado en Node.js lee los archivos XML, los transforma en JSON y los inserta en las tablas <code>CufesXML</code>, <code>ItemsCufeXML</code>, <code>ItemCufeXMLTaxes</code>, <code>ItemCufeXMLTaxSubtotals</code>, <code>ItemCufeXMLAllowanceCharges</code> utilizando Prisma. Adem\u00e1s, dispara el hook <code>CrearProveedor</code> a trav\u00e9s de la API de Qonta para gestionar la creaci\u00f3n/actualizaci\u00f3n autom\u00e1tica de proveedores.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#355-integracion-con-proveedor-tecnologico-kiai","title":"3.5.5 Integraci\u00f3n con Proveedor Tecnol\u00f3gico (Kiai)","text":"<ul> <li>Prop\u00f3sito: Cumplir con los requisitos de acuse de la DIAN para facturas electr\u00f3nicas y eventos Radi\u00e1n.</li> <li>Mecanismo: Qonta consume la API REST de Kiai para enviar los eventos de acuse, recibo de mercanc\u00edas, y aceptaci\u00f3n/rechazo de facturas.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#356-exportacion-a-erps-contables","title":"3.5.6 Exportaci\u00f3n a ERPs Contables","text":"<ul> <li>Prop\u00f3sito: Integrar las causaciones generadas en Qonta con los sistemas de contabilidad existentes de los clientes.</li> <li>Mecanismo: Actualmente, se realiza principalmente mediante la generaci\u00f3n de archivos planos (CSV, TXT) en formatos espec\u00edficos que los ERPs pueden importar. Se contempla la futura implementaci\u00f3n de APIs para una integraci\u00f3n m\u00e1s directa.</li> </ul>"},{"location":"03_arquitectura/arquitectura_tecnica/#36-despliegue","title":"3.6 Despliegue","text":"<p>Los componentes de Qonta (API GraphQL, Microservicio Bot DIAN, Microservicio XML Extract) est\u00e1n dise\u00f1ados para ser desplegados en entornos contenerizados (Docker) y orquestados (Kubernetes) para asegurar alta disponibilidad y escalabilidad.</p>"},{"location":"03_arquitectura/arquitectura_tecnica/#37-consideraciones-de-seguridad","title":"3.7 Consideraciones de Seguridad","text":"<ul> <li>Autenticaci\u00f3n y Autorizaci\u00f3n: Uso de JWT (JSON Web Tokens) para asegurar las APIs. Control de acceso basado en roles y permisos.</li> <li>Protecci\u00f3n de Datos: Cifrado de datos sensibles en la base de datos y en tr\u00e1nsito (HTTPS/TLS).</li> <li>Auditor\u00eda: Registro de eventos clave y cambios en los datos.</li> <li>Seguridad del Bot y XML Extract: Operaci\u00f3n en entornos aislados y con permisos m\u00ednimos para minimizar riesgos de acceso no autorizado a credenciales de la DIAN o a la manipulaci\u00f3n de datos sensibles. ````http://googleusercontent.com/image_generation_content/6</li> </ul>"},{"location":"04_reglas_negocio/","title":"4. Reglas de Negocio (Hooks) \ud83e\udde0","text":"<p>El apartado de Hooks es el motor de la adaptabilidad de Qonta. Esta secci\u00f3n explica el mecanismo de los Hooks y las reglas de negocio cr\u00edticas implementadas en JavaScript y Sequelize.</p> <p>Documentos en esta secci\u00f3n:</p> <ul> <li>4.1 Hooks: Definici\u00f3n, arquitectura y puntos de ejecuci\u00f3n para la l\u00f3gica de causaci\u00f3n personalizada.</li> </ul>"},{"location":"04_reglas_negocio/hooks/","title":"4. Reglas de Negocio (Hooks)","text":"<p>El sistema Qonta incorpora un potente mecanismo de Hooks (tambi\u00e9n conocidos como \"ganchos\" o \"disparadores\") que permite a los clientes, y a los administradores del sistema, definir y ejecutar l\u00f3gica de negocio personalizada en puntos clave del flujo de trabajo, sin necesidad de modificar el c\u00f3digo fuente principal de la aplicaci\u00f3n.</p>"},{"location":"04_reglas_negocio/hooks/#41-que-son-los-hooks","title":"4.1 \u00bfQu\u00e9 son los Hooks?","text":"<p>Los Hooks son fragmentos de c\u00f3digo (actualmente en JavaScript) que se configuran y almacenan en la base de datos (<code>MovimientosSistemas.Campos</code>). Estos fragmentos son invocados por el sistema en momentos predefinidos durante la ejecuci\u00f3n de una operaci\u00f3n. Act\u00faan como \"interceptores\" que pueden:</p> <ul> <li>Leer datos del contexto actual.</li> <li>Modificar datos antes de que se persistan o se utilicen en la siguiente etapa.</li> <li>Validar condiciones y, si no se cumplen, detener la operaci\u00f3n y enviar un mensaje de error.</li> <li>Ejecutar l\u00f3gica adicional (ej. notificaciones personalizadas, llamadas a APIs externas).</li> </ul> <p>Este enfoque basado en eventos proporciona una gran flexibilidad para adaptar el comportamiento de Qonta a las necesidades espec\u00edficas de cada cliente, especialmente en lo referente a las complejas reglas de causaci\u00f3n contable y retenciones.</p>"},{"location":"04_reglas_negocio/hooks/#42-arquitectura-y-ejecucion-de-hooks","title":"4.2 Arquitectura y Ejecuci\u00f3n de Hooks","text":""},{"location":"04_reglas_negocio/hooks/#421-almacenamiento","title":"4.2.1 Almacenamiento","text":"<p>Los Hooks se almacenan en la base de datos, t\u00edpicamente en la tabla <code>MovimientosSistemas</code>, en el campo <code>Campos</code> que podr\u00eda contener un JSON o un bloque de texto con el c\u00f3digo JavaScript. Cada <code>MovimientoSistema</code> puede representar un \"tipo de evento\" o un \"punto de enganche\" donde se puede inyectar l\u00f3gica.</p>"},{"location":"04_reglas_negocio/hooks/#422-puntos-de-ejecucion","title":"4.2.2 Puntos de Ejecuci\u00f3n","text":"<p>El sistema Qonta define varios puntos de ejecuci\u00f3n preestablecidos donde los hooks pueden ser activados. Ejemplos de estos puntos pueden ser:</p> <ul> <li><code>antesDeProcesarFactura</code>: Ejecutado antes de que se inicie el an\u00e1lisis de una factura.</li> <li><code>despuesDeAnalizarItemFactura</code>: Ejecutado despu\u00e9s de que un \u00edtem de factura ha sido clasificado.</li> <li><code>antesDeGenerarCausacion</code>: Ejecutado inmediatamente antes de que se cree el registro de causaci\u00f3n contable. Ideal para modificar cuentas, valores, o aplicar retenciones condicionales.</li> <li><code>despuesDeGuardarCausacion</code>: Ejecutado tras la persistencia, ideal para disparar notificaciones o flujos de integraci\u00f3n.</li> </ul>"},{"location":"04_reglas_negocio/hooks/#423-contexto-de-ejecucion-sandbox","title":"4.2.3 Contexto de Ejecuci\u00f3n (Sandbox)","text":"<p>El c\u00f3digo JavaScript de los Hooks se ejecuta en un entorno aislado (sandbox) para garantizar la seguridad y evitar que el c\u00f3digo malicioso o err\u00f3neo afecte al sistema principal.</p> <p>El hook recibe un objeto de contexto que contiene toda la informaci\u00f3n relevante para la operaci\u00f3n actual:</p> Propiedad del Contexto Descripci\u00f3n <code>factura</code> Objeto completo de la factura actual (<code>FacturasRecibidasDian</code>). <code>proveedor</code> Objeto completo del proveedor asociado. <code>cliente</code> Objeto del cliente al que pertenece la factura. <code>itemsCausar</code> Array de \u00edtems a ser causados (disponible en hooks de pre-causaci\u00f3n). <code>cuentasContables</code> Array con las cuentas contables generadas hasta el momento (disponible en hooks de post-causaci\u00f3n). <code>logger</code> Funci\u00f3n para registrar mensajes de depuraci\u00f3n en los logs del sistema. <code>error</code> Funci\u00f3n para detener la ejecuci\u00f3n y retornar un mensaje de error al usuario."},{"location":"04_reglas_negocio/hooks/#43-aplicaciones-de-los-hooks","title":"4.3 Aplicaciones de los Hooks","text":"<p>Los hooks son la herramienta principal para la personalizaci\u00f3n de la l\u00f3gica de negocio de Qonta:</p> <ol> <li>L\u00f3gica de Retenciones Condicionales: Aplicar una retenci\u00f3n en la fuente o ICA solo si la suma de las bases de un proveedor supera un monto en un per\u00edodo espec\u00edfico.</li> <li>Cuentas Contables Din\u00e1micas: Sobrescribir la cuenta contable de gasto por defecto bas\u00e1ndose en palabras clave del \u00edtem, en el centro de costos o en responsabilidades fiscales espec\u00edficas que no est\u00e1n cubiertas por las reglas est\u00e1ndar.</li> <li>Validaci\u00f3n Personalizada: Evitar la causaci\u00f3n de facturas que no cumplan con una regla interna del cliente (ej. facturas mayores a X valor deben ser aprobadas manualmente por un usuario espec\u00edfico).</li> <li>Integraci\u00f3n de Datos: Enviar una notificaci\u00f3n a un sistema externo o actualizar un campo del CRM despu\u00e9s de una causaci\u00f3n exitosa.</li> </ol>"},{"location":"04_reglas_negocio/hooks/#44-ejemplo-de-hook-pseudo-codigo","title":"4.4 Ejemplo de Hook (Pseudo-c\u00f3digo)","text":"<pre><code>// Hook: antesDeGenerarCausacion\nfunction customCausacionLogic(context) {\n    const factura = context.factura;\n    const proveedor = context.proveedor;\n\n    // 1. Validar si la factura es mayor a 10 millones y el proveedor es Persona Natural\n    if (factura.Valor &gt; 10000000 &amp;&amp; proveedor.TipoOrganizacionFK === 'PersonaNaturalID') {\n        context.error(\"Factura excede el l\u00edmite. Requiere aprobaci\u00f3n manual de gerencia antes de causar.\");\n        return; // Detiene la causaci\u00f3n\n    }\n\n    // 2. Modificar la cuenta de gasto para servicios de asesor\u00eda\n    context.itemsCausar.forEach(item =&gt; {\n        if (item.Description.toLowerCase().includes('asesoria') &amp;&amp; item.CuentaFK === 'CuentaGastoGenericaID') {\n            item.CuentaFK = 'CuentaAsesoriaEspecialID';\n            context.logger(\"Cuenta de gasto modificada para \u00edtem de asesor\u00eda.\");\n        }\n    });\n}\n</code></pre>"},{"location":"05_integraciones/","title":"5. Integraciones \ud83d\udd17","text":"<p>Qonta depende de la comunicaci\u00f3n con servicios externos y microservicios internos para su operaci\u00f3n. Esta secci\u00f3n detalla los flujos, protocolos y componentes involucrados en la integraci\u00f3n de datos y servicios.</p> <p>Documentos en esta secci\u00f3n:</p> <ul> <li>5.1 Integraci\u00f3n con la DIAN (Bot de Web Scraping): Flujo de descarga automatizada.</li> <li>5.2 Integraci\u00f3n con Kiai (Proveedor Tecnol\u00f3gico): Eventos de acuse y cumplimiento de requisitos Radi\u00e1n.</li> <li>5.3 Extracci\u00f3n y Procesamiento de XML (Project Extract XML): Servicio local de Node.js que transforma el XML en datos persistibles.</li> </ul>"},{"location":"05_integraciones/dian_bot/","title":"5.1 Integraci\u00f3n con la DIAN (Bot de Web Scraping)","text":"<p>El sistema Qonta necesita acceder a las facturas electr\u00f3nicas de sus clientes que se encuentran almacenadas en el portal de la Direcci\u00f3n de Impuestos y Aduanas Nacionales (DIAN) de Colombia. Debido a que la DIAN no ofrece una API p\u00fablica y estable para la consulta y descarga masiva, esta funcionalidad se implementa mediante un Bot de Web Scraping.</p>"},{"location":"05_integraciones/dian_bot/#511-proposito-del-bot","title":"5.1.1 Prop\u00f3sito del Bot","text":"<p>El objetivo principal del Microservicio Bot DIAN es automatizar la descarga peri\u00f3dica y masiva de archivos XML y la representaci\u00f3n gr\u00e1fica (PDF) de todas las facturas electr\u00f3nicas recibidas por los clientes de Qonta.</p>"},{"location":"05_integraciones/dian_bot/#512-arquitectura-y-componentes","title":"5.1.2 Arquitectura y Componentes","text":"<p>El Bot es un microservicio independiente, separado del servidor principal de GraphQL de Qonta, para garantizar la estabilidad y evitar sobrecargar el servidor de aplicaciones principal con tareas de larga duraci\u00f3n.</p> Componente Descripci\u00f3n Motor de Automatizaci\u00f3n Utiliza librer\u00edas de automatizaci\u00f3n de navegador (ej. Puppeteer o Selenium) para simular las acciones de un usuario (login, navegaci\u00f3n, filtros, descarga). Almac\u00e9n de Credenciales Almacenamiento seguro de las credenciales de la DIAN del cliente (usuario y contrase\u00f1a/firma). API de Qonta El Bot consume un endpoint espec\u00edfico del API Gateway de Qonta para inyectar los archivos descargados (<code>XML</code> y <code>PDF Base</code>) en la tabla <code>FacturasRecibidasDian</code> y <code>CufesXML</code> para su posterior procesamiento."},{"location":"05_integraciones/dian_bot/#513-flujo-de-operacion","title":"5.1.3 Flujo de Operaci\u00f3n","text":"<ol> <li>Programaci\u00f3n: El sistema Qonta programa la ejecuci\u00f3n del Bot a intervalos regulares (ej. cada 4 horas) para cada cliente activo.</li> <li>Inicio de Sesi\u00f3n: El Bot inicia una instancia de navegador virtual (headless) y utiliza las credenciales almacenadas para autenticarse en el portal de la DIAN.</li> <li>Navegaci\u00f3n y Filtros: Navega a la secci\u00f3n de \"Facturas Recibidas\" y aplica filtros de fecha (desde la \u00faltima descarga exitosa hasta la fecha actual) y estado.</li> <li>Descarga Masiva: Itera sobre el listado de facturas, descargando el archivo XML y, si est\u00e1 disponible, el PDF asociado a la factura.</li> <li>Inyecci\u00f3n en Qonta: Por cada factura descargada, el Bot invoca la API de Qonta, enviando el contenido del XML para la extracci\u00f3n del CUFE y la informaci\u00f3n clave, y el PDF para su almacenamiento.</li> <li>Actualizaci\u00f3n de Estado: Qonta actualiza el registro de la \u00faltima descarga exitosa para ese cliente, asegurando que no se reprocesen facturas en el siguiente ciclo.</li> <li>Manejo de Errores: El Bot incluye l\u00f3gica para manejar CAPTCHAs, errores de conexi\u00f3n, cambios menores en la interfaz de la DIAN y fallos de autenticaci\u00f3n, notificando a los administradores de Qonta sobre cualquier problema persistente.</li> </ol>"},{"location":"05_integraciones/dian_bot/#514-consideraciones-de-seguridad-y-riesgos","title":"5.1.4 Consideraciones de Seguridad y Riesgos","text":"<ul> <li>Riesgo de Cambios de Interfaz: La DIAN puede cambiar su interfaz sin previo aviso, lo que requiere un mantenimiento constante y una adaptaci\u00f3n r\u00e1pida del c\u00f3digo del Bot.</li> <li>Gesti\u00f3n de Credenciales: El almacenamiento de credenciales debe ser altamente seguro, utilizando cifrado robusto y siguiendo las mejores pr\u00e1cticas de seguridad.</li> <li>Limitaci\u00f3n de Velocidad: El Bot debe operar con una cadencia adecuada para evitar ser detectado y bloqueado por la DIAN por exceso de peticiones.</li> </ul>"},{"location":"05_integraciones/kiai_api/","title":"5.2 Integraci\u00f3n con Kiai (Proveedor Tecnol\u00f3gico)","text":"<p>Kiai es el Proveedor Tecnol\u00f3gico (PT) que facilita a Qonta el cumplimiento de los requisitos de la Factura Electr\u00f3nica como T\u00edtulo Valor o Radi\u00e1n, lo que incluye la generaci\u00f3n de eventos de acuse de recibo y aceptaci\u00f3n/rechazo.</p>"},{"location":"05_integraciones/kiai_api/#521-proposito-de-la-integracion","title":"5.2.1 Prop\u00f3sito de la Integraci\u00f3n","text":"<p>La integraci\u00f3n con Kiai permite a Qonta gestionar el ciclo de vida de los eventos de la factura electr\u00f3nica, un proceso vital para que la factura pueda ser descontada, endosada o utilizada como t\u00edtulo valor.</p> <p>Los eventos gestionados a trav\u00e9s de esta API son:</p> <ol> <li>Acuse de Recibo de la Factura Electr\u00f3nica de Venta.</li> <li>Recibo del Bien o Prestaci\u00f3n del Servicio.</li> <li>Aceptaci\u00f3n Expresa o T\u00e1cita de la Factura.</li> <li>Rechazo de la Factura.</li> </ol>"},{"location":"05_integraciones/kiai_api/#522-mecanismo-de-integracion","title":"5.2.2 Mecanismo de Integraci\u00f3n","text":"<p>Qonta se integra con Kiai a trav\u00e9s de una API REST mediante llamadas seguras (HTTPS).</p> Operaci\u00f3n en Qonta Servicio Kiai Consumido Detalle del Flujo Generar Acuse <code>/api/events/acuse_recibo</code> Qonta identifica la factura y el cliente, y env\u00eda el CUFE junto con las credenciales del cliente a Kiai. Kiai procesa el evento y retorna la respuesta de la DIAN. Generar Recibo de Bien <code>/api/events/recibo_bien</code> Se ejecuta cuando el cliente confirma la recepci\u00f3n del bien o servicio. Qonta env\u00eda la solicitud a Kiai. Generar Aceptaci\u00f3n Expresa <code>/api/events/aceptacion_expresa</code> Se utiliza para dar conformidad de forma expl\u00edcita antes de la aceptaci\u00f3n t\u00e1cita. Generar Rechazo <code>/api/events/rechazo_factura</code> Se utiliza si la factura presenta inconsistencias. Requiere un <code>MotivoRechazoFK</code> de la tabla <code>MotivosRechazoFacturas</code>. Consulta de Eventos <code>/api/events/consulta_eventos</code> Permite consultar el estado actual de los eventos de una factura en particular en el sistema de Kiai/DIAN."},{"location":"05_integraciones/kiai_api/#523-manejo-de-credenciales-y-seguridad","title":"5.2.3 Manejo de Credenciales y Seguridad","text":"<ul> <li>Credenciales: Cada cliente de Qonta debe tener credenciales configuradas en Kiai (token de acceso, NIT, etc.). Estas credenciales se almacenan de forma segura y cifrada en la configuraci\u00f3n de <code>Clientes</code>.</li> <li>Trazabilidad: La respuesta de la API de Kiai (incluyendo el XML del evento y el CUNE - C\u00f3digo \u00danico de Notificaci\u00f3n de Evento) es vital y debe ser almacenada en el sistema de Qonta para garantizar la trazabilidad legal de cada evento.</li> <li>Modelo de Datos: La ejecuci\u00f3n de estas integraciones tiene un impacto directo en el campo <code>Estado</code> de la tabla <code>FacturasRecibidasDian</code> y puede generar nuevos registros en la tabla <code>TrazabilidadesCausaciones</code> para reflejar el cambio en el ciclo de vida de la factura.</li> </ul>"},{"location":"05_integraciones/project_extract_xml/","title":"5.3 Extracci\u00f3n y Procesamiento de XML (Project Extract XML)","text":"<p>Complementando la funcionalidad del Bot DIAN, existe un proyecto local (un microservicio) basado en Node.js que reside en la misma m\u00e1quina virtual donde opera el Bot. Este proyecto es el encargado de procesar los archivos XML de las facturas electr\u00f3nicas descargadas, extrayendo su informaci\u00f3n estructurada y prepar\u00e1ndola para la inserci\u00f3n en la base de datos de Qonta.</p>"},{"location":"05_integraciones/project_extract_xml/#531-proposito-del-project-extract-xml","title":"5.3.1 Prop\u00f3sito del Project Extract XML","text":"<p>El objetivo principal de este proyecto es:</p> <ol> <li>Parsear: Leer y analizar los archivos XML de las facturas electr\u00f3nicas (UBL 2.1).</li> <li>Transformar: Convertir la informaci\u00f3n estructurada del XML en un formato JSON manejable.</li> <li>Normalizar: Distribuir los datos del JSON en las estructuras de las tablas de Qonta.</li> <li>Insertar: Utilizar un ORM (Prisma) para insertar los datos extra\u00eddos en las tablas correspondientes de la base de datos de Qonta.</li> <li>Extender: Disparar l\u00f3gica de negocio adicional post-inserci\u00f3n, como la creaci\u00f3n o actualizaci\u00f3n de proveedores.</li> </ol>"},{"location":"05_integraciones/project_extract_xml/#532-arquitectura-y-flujo-de-operacion","title":"5.3.2 Arquitectura y Flujo de Operaci\u00f3n","text":"<p>El \"Project Extract XML\" act\u00faa como un intermediario vital entre el Bot DIAN y la base de datos de Qonta.</p> <pre><code>graph TD\n    A[Bot DIAN] --&gt; B{Descarga XML/PDF};\n    B --&gt; C[Almacena XML/PDF Localmente];\n    C --&gt; D[Project Extract XML (Node.js)];\n    D -- Lee XML localmente --&gt; E[Parseo y Transformaci\u00f3n a JSON];\n    E -- Normalizaci\u00f3n de Datos --&gt; F[Preparaci\u00f3n para Inserci\u00f3n (Prisma)];\n    F -- Inserta en DB Qonta --&gt; G[CufesXML];\n    F -- Inserta en DB Qonta --&gt; H[ItemsCufeXML];\n    F -- Inserta en DB Qonta --&gt; I[ItemCufeXMLTaxes];\n    F -- Inserta en DB Qonta --&gt; J[ItemCufeXMLTaxSubtotals];\n    F -- Inserta en DB Qonta --&gt; K[ItemCufeXMLAllowanceCharges];\n    K -- Despu\u00e9s de Inserci\u00f3n --&gt; L[Llama API de Qonta para correr Hook];\n    L --&gt; M[Hook 'CrearProveedor'];\n    M --&gt; N[Crea/Actualiza registro en Proveedores];</code></pre> <ol> <li>Descarga del Bot: El Bot DIAN descarga el archivo XML y el PDF de una factura electr\u00f3nica y los almacena temporalmente en un directorio local en la m\u00e1quina virtual.</li> <li>Detecci\u00f3n y Procesamiento: El Project Extract XML monitoriza este directorio. Cuando detecta un nuevo archivo XML:<ul> <li>Lo lee y lo parsea utilizando librer\u00edas XML en Node.js.</li> <li>Extrae todos los campos relevantes de la estructura UBL 2.1.</li> <li>Construye objetos JSON que corresponden directamente a los modelos de Prisma/Sequelize.</li> </ul> </li> <li>Inserci\u00f3n en la Base de Datos:<ul> <li>Utiliza Prisma (u otro ORM como Sequelize) para interactuar con la base de datos.</li> <li>Inserta los datos extra\u00eddos en las siguientes tablas:<ul> <li><code>CufesXML</code>: Informaci\u00f3n general de la factura.</li> <li><code>ItemsCufeXML</code>: Detalles de cada \u00edtem (producto/servicio) de la factura.</li> <li><code>ItemCufeXMLTaxes</code>: Impuestos generales por \u00edtem.</li> <li><code>ItemCufeXMLTaxSubtotals</code>: Subtotales detallados de los impuestos por \u00edtem.</li> <li><code>ItemCufeXMLAllowanceCharges</code>: Descuentos y cargos aplicados a los \u00edtems.</li> </ul> </li> </ul> </li> <li>Activaci\u00f3n de Hooks: Una vez que la informaci\u00f3n de la factura ha sido insertada exitosamente en la base de datos, el Project Extract XML realiza una llamada a una API espec\u00edfica del servidor GraphQL de Qonta.<ul> <li>Esta llamada tiene como objetivo disparar el hook <code>CrearProveedor</code>.</li> <li>El hook <code>CrearProveedor</code> se encarga de verificar si el emisor de la factura ya existe en la tabla <code>Proveedores</code>. Si no existe, lo crea; si existe, puede actualizar su informaci\u00f3n.</li> </ul> </li> </ol>"},{"location":"05_integraciones/project_extract_xml/#533-tecnologias-utilizadas","title":"5.3.3 Tecnolog\u00edas Utilizadas","text":"<ul> <li>Node.js: Entorno de ejecuci\u00f3n para el microservicio.</li> <li>Librer\u00edas XML para Node.js: Para el parsing y manipulaci\u00f3n de XML.</li> <li>Prisma (ORM): Para la interacci\u00f3n con la base de datos SQL Server, simplificando las operaciones CRUD.</li> <li>API GraphQL de Qonta: Para invocar el hook <code>CrearProveedor</code> y otras l\u00f3gicas de negocio.</li> </ul>"}]}